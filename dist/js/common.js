$(document).ready(function(){function e(){f.street_width=$(".street").eq(0).width(),$(".street").eq(1).css("left",f.street_width),$(".street_all").css("margin-left",f.street_width*-1),f.iknow_timeout=setTimeout(function(){u()},5300),window.addEventListener("deviceorientation",function(e){c(e)}),f.loading_num+=1,n()}function t(){f.loading_num>=2&&f.loading.fadeOut(300,function(){f.loading.remove()})}function n(){function e(e){"image"==e.item.type&&(images[e.item.id]=e.result)}function t(e){var t=e.target;ss.loading_ani_atlas_=t.getResult("loading_ani_atlas_"),_=new lib2.loading_ani,f.loading_stage=new createjs.Stage(n),f.loading_stage.addChild(_),f.loading_stage.update(),createjs.Ticker.setFPS(30),createjs.Ticker.addEventListener("tick",a),o()}var n,_;n=document.getElementById("loading"),images=images||{},ss=ss||{};var s=new createjs.LoadQueue((!1));s.addEventListener("fileload",e),s.addEventListener("complete",t),s.loadFile({src:"images/loading_ani_atlas_.json",type:"spritesheet",id:"loading_ani_atlas_"},!0),s.loadManifest(lib2.properties.manifest)}function o(){function e(e){"image"==e.item.type&&(images[e.item.id]=e.result)}function t(e){var t=e.target;ss.event04_atlas_=t.getResult("event04_atlas_"),f.event_popup_4_stage=new createjs.Stage(document.getElementById("event_popup_4_ani")),f.event_popup_4_ani=f.event_popup_4_stage.addChild(new lib3.event04_1),f.event_popup_4_ani.setTransform(375,667).gotoAndStop(0),f.event_popup_4_stage.update(),_()}var n;n=document.getElementById("loading"),images=images||{},ss=ss||{};var o=new createjs.LoadQueue((!1));o.addEventListener("fileload",e),o.addEventListener("complete",t),o.loadFile({src:"images/event04_atlas_.json",type:"spritesheet",id:"event04_atlas_"},!0),o.loadManifest(lib3.properties.manifest)}function _(){function e(e){"image"==e.item.type&&(images[e.item.id]=e.result)}function n(e){var n=e.target;ss.event_popup_atlas_=n.getResult("event_popup_atlas_"),f.event_popup_2_stage=new createjs.Stage(document.getElementById("event_popup_2_ani")),f.event_popup_2_ani=f.event_popup_2_stage.addChild(new lib.event02),f.event_popup_2_ani.setTransform(375,667).gotoAndStop(0),f.event_popup_2_stage.update(),f.event_popup_3_stage=new createjs.Stage(document.getElementById("event_popup_3_ani")),f.event_popup_3_ani=f.event_popup_3_stage.addChild(new lib.event01),f.event_popup_3_ani.setTransform(45,180).gotoAndStop(0),f.event_popup_3_ani2=f.event_popup_3_stage.addChild(new lib.talk_box01),f.event_popup_3_ani2.setTransform(45,850).gotoAndStop(0),f.event_popup_3_stage.update(),f.loading_num+=1,t()}f.event_box_bg={images:["images/event_box_bg.png"],frames:{width:750,height:260},animations:{stand:0,show:{frames:[0,8,1,9,2,10,3,11,4,12,5,13,6,14,7],speed:1},backshow:{frames:[7,14,6,13,5,12,4,11,3,10,2,9,1,8,0],speed:1}}},f.event_box_bg_spriteSheet=new createjs.SpriteSheet(f.event_box_bg),f.event_box_bg_canvas=document.getElementById("event_box_bg"),f.event_box_bg_stage=new createjs.Stage(f.event_box_bg_canvas),images=images||{},ss=ss||{};var o=new createjs.LoadQueue((!1));o.addEventListener("fileload",e),o.addEventListener("complete",n),o.loadFile({src:"images/event_popup_atlas_.json",type:"spritesheet",id:"event_popup_atlas_"},!0),o.loadManifest(lib.properties.manifest)}function a(){f.street_deg>=-62&&f.street_deg<=-42?r(!0,1):f.street_deg>=-120&&f.street_deg<=-100?r(!0,2):f.street_deg>=-180&&f.street_deg<=-170?r(!0,3):f.street_deg>=170&&f.street_deg<=180?r(!0,3):f.street_deg>=-218&&f.street_deg<=-198?r(!0,4):f.street_deg>=140&&f.street_deg<=160?r(!0,4):f.street_deg>=-297&&f.street_deg<=-277?r(!0,5):f.street_deg>=60&&f.street_deg<=80?r(!0,5):r(!1),f.event_box_bg_stage&&f.event_box_bg_stage.update(),f.loading_stage&&f.loading_stage.update(),f.event_popup_2_stage&&f.event_popup_2_stage.update(),f.event_popup_3_stage&&f.event_popup_3_stage.update(),f.event_popup_4_stage&&f.event_popup_4_stage.update()}function s(){$(".event_popup_1_videobtn").fadeOut(),$("#event_popup_1_video")[0].play()}function i(e){function t(){$(".event_popup .popup").eq(f.now_event-1).addClass("on"),p(!0)}e?($(".event_popup .popup").eq(f.now_event-1).show(),$(".event_popup").fadeIn(300,t)):$(".event_popup").fadeOut(300,function(){$(".event_popup .popup").hide(),f.street_ctrl=!0})}function p(e){e?3==f.now_event?f.event_popup_2_ani.play():2==f.now_event?(f.event_popup_3_ani.play(),f.event_popup_3_ani2.play()):4==f.now_event&&f.event_popup_4_ani.play():2==f.now_event?f.event_popup_2_ani.gotoAndStop(0):3==f.now_event?(f.event_popup_3_ani.gotoAndStop(0),f.event_popup_3_ani2.gotoAndStop(0)):4==f.now_event&&f.event_popup_4_ani.gotoAndStop(0)}function d(){f.street_ctrl=!1,f.now_event=$(this).index()+1,console.log(f.now_event),i(!0)}function r(e,t){if(e){if(f.now_event==t)return;if(f.now_event=t,!f.event_box_bg_stage)return;f.event_box_bg_stage.removeAllChildren(),f.event_box_bg_mc=f.event_box_bg_stage.addChild(new createjs.Sprite(f.event_box_bg_spriteSheet,"show")),f.event_box_bg_mc.addEventListener("animationend",l),$(".event_box").addClass("on"),$(".event_box").find("span").removeClass("on").eq(t).addClass("on"),$(".event_line").find(".icon").removeClass("on").eq(t-1).addClass("on")}else{if(0==f.now_event)return;f.now_event=0,f.event_box_bg_stage.removeAllChildren(),f.event_box_bg_mc=f.event_box_bg_stage.addChild(new createjs.Sprite(f.event_box_bg_spriteSheet,"backshow")),f.event_box_bg_mc.addEventListener("animationend",l),$(".event_box").removeClass("on"),$(".event_box").find("span").removeClass("on"),$(".event_line").find(".icon").removeClass("on")}}function l(){f.event_box_bg_mc.stop()}function g(){function e(e){device.mobile()&&(e=e.originalEvent.touches[0]),_=e.pageX-o,f.org_street=t-_/$(window).width()*120,f.org_street<0?f.org_street=f.org_street+360:f.org_street>360&&(f.org_street=f.org_street-360),m()}var t,n=$(this),o=0,_=0;n.on("touchstart",function(_){device.mobile()&&(_=_.originalEvent.touches[0]),o=_.pageX,n.addClass("move"),f.street_ctrl=!1,t=f.org_street,n.bind("touchmove",e)}),n.on("touchend",function(){n.removeClass("move"),f.street_ctrl=!0,n.unbind("touchmove",e)})}function u(){clearTimeout(f.iknow_timeout),$(".tip_box").fadeOut()}function v(){$(this).hasClass("on")?($(".menuDom").removeClass("on"),$(".menu").addClass("off").removeClass("on"),f.menu_timeout=setTimeout(function(){f.street_ctrl=!0,$(".menu").removeClass("off")},1e3)):(f.street_ctrl=!1,$(".menuDom").addClass("on"),clearTimeout(f.menu_timeout),$(".menu").removeClass("off").addClass("on"))}function c(e){f.street_alpha=e.alpha,f.street_ctrl&&m()}function m(){f.street_width=$(".street").eq(0).width(),$(".street").eq(1).css("left",f.street_width),$(".street_all").css("margin-left",f.street_width*-1),f.street_deg=Math.floor(f.street_alpha-f.org_street);var e=Math.floor(f.street_width/360*f.street_deg+$(window).width());$(".street_all").css("left",e)}var f={wrp:$(".wrapper"),loading:$(".loading"),loading_num:0,menu_timeout:"",iknow_timeout:"",org_street:179,street_alpha:0,street_ctrl:!0,street_deg:0,now_event:0};$(".street").clone().appendTo(".street_all_in"),$(".event_point").click(d),$(".event_popup .closebtn").click(function(){i(!1)}),$(".event_popup_1_videobtn").click(s),$(".street_all").each(g),$(".iknow_btn").on("click",u),$(".menubtn").click(v),$(window).load(e)});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbW1vbi5qcyJdLCJuYW1lcyI6WyIkIiwiZG9jdW1lbnQiLCJyZWFkeSIsIndpbmRvd19sb2FkIiwibyIsInN0cmVldF93aWR0aCIsImVxIiwid2lkdGgiLCJjc3MiLCJpa25vd190aW1lb3V0Iiwic2V0VGltZW91dCIsImlrbm93X2NsaWNrIiwid2luZG93IiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJ3aW5kb3dfZGV2aWNlb3JpZW50YXRpb24iLCJsb2FkaW5nX251bSIsImNyZWF0anNfbG9hZGluZyIsImNoZWNrX2xvYWRpbmciLCJsb2FkaW5nIiwiZmFkZU91dCIsInJlbW92ZSIsImhhbmRsZUZpbGVMb2FkIiwiZXZ0IiwiaXRlbSIsInR5cGUiLCJpbWFnZXMiLCJpZCIsInJlc3VsdCIsImhhbmRsZUNvbXBsZXRlIiwicXVldWUiLCJ0YXJnZXQiLCJzcyIsImdldFJlc3VsdCIsImV4cG9ydFJvb3QiLCJsaWIyIiwibG9hZGluZ19hbmkiLCJsb2FkaW5nX3N0YWdlIiwiY3JlYXRlanMiLCJTdGFnZSIsImNhbnZhcyIsImFkZENoaWxkIiwidXBkYXRlIiwiVGlja2VyIiwic2V0RlBTIiwiU3RhZ2VMaXN0ZW50ZXIiLCJjcmVhdGVqc19ldmVudDA0IiwiZ2V0RWxlbWVudEJ5SWQiLCJsb2FkZXIiLCJMb2FkUXVldWUiLCJsb2FkRmlsZSIsInNyYyIsImxvYWRNYW5pZmVzdCIsInByb3BlcnRpZXMiLCJtYW5pZmVzdCIsImV2ZW50X3BvcHVwXzRfc3RhZ2UiLCJldmVudF9wb3B1cF80X2FuaSIsImxpYjMiLCJldmVudDA0XzEiLCJzZXRUcmFuc2Zvcm0iLCJnb3RvQW5kU3RvcCIsImNyZWF0anNfc3RhcnQiLCJldmVudF9wb3B1cF8yX3N0YWdlIiwiZXZlbnRfcG9wdXBfMl9hbmkiLCJsaWIiLCJldmVudDAyIiwiZXZlbnRfcG9wdXBfM19zdGFnZSIsImV2ZW50X3BvcHVwXzNfYW5pIiwiZXZlbnQwMSIsImV2ZW50X3BvcHVwXzNfYW5pMiIsInRhbGtfYm94MDEiLCJldmVudF9ib3hfYmciLCJmcmFtZXMiLCJoZWlnaHQiLCJhbmltYXRpb25zIiwic3RhbmQiLCJzaG93Iiwic3BlZWQiLCJiYWNrc2hvdyIsImV2ZW50X2JveF9iZ19zcHJpdGVTaGVldCIsIlNwcml0ZVNoZWV0IiwiZXZlbnRfYm94X2JnX2NhbnZhcyIsImV2ZW50X2JveF9iZ19zdGFnZSIsInN0cmVldF9kZWciLCJwbGF5X2V2ZW50X2JveCIsInBsYXl2aWRlbyIsInBsYXkiLCJzaG93X3BvcCIsIl90IiwiZXZlbnRfcG9wdXBfc3RhcnQiLCJub3dfZXZlbnQiLCJhZGRDbGFzcyIsInBvcHVwX2FuaV9wbGF5IiwiZmFkZUluIiwiaGlkZSIsInN0cmVldF9jdHJsIiwiZXZlbnRfcG9pbnRfY2xpY2siLCJ0aGlzIiwiaW5kZXgiLCJjb25zb2xlIiwibG9nIiwiX24iLCJyZW1vdmVBbGxDaGlsZHJlbiIsImV2ZW50X2JveF9iZ19tYyIsIlNwcml0ZSIsImV2ZW50X2JveF9iZ19jb21wbGV0ZSIsImZpbmQiLCJyZW1vdmVDbGFzcyIsInN0b3AiLCJzdHJlZXRfYWxsIiwiX3RvdWNobW92ZSIsImRldmljZSIsIm1vYmlsZSIsIm9yaWdpbmFsRXZlbnQiLCJ0b3VjaGVzIiwiZHJhZ19sZWZ0IiwicGFnZVgiLCJvZ19sZWZ0Iiwib3JnX3N0cmVldCIsInRtcF9vcmdfc3RyZWV0Iiwic3RyZWV0X21vdmUiLCJfdGhpcyIsIm9uIiwiYmluZCIsInVuYmluZCIsImNsZWFyVGltZW91dCIsIm1lbnVidG5fY2xpY2siLCJoYXNDbGFzcyIsIm1lbnVfdGltZW91dCIsInN0cmVldF9hbHBoYSIsImFscGhhIiwiTWF0aCIsImZsb29yIiwiZGlzIiwid3JwIiwiY2xvbmUiLCJhcHBlbmRUbyIsImNsaWNrIiwiZWFjaCIsImxvYWQiXSwibWFwcGluZ3MiOiJBQUFBQSxFQUFFQyxVQUFVQyxNQUFNLFdBMEJqQixRQUFTQyxLQUNSQyxFQUFFQyxhQUFlTCxFQUFFLFdBQVdNLEdBQUcsR0FBR0MsUUFDcENQLEVB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UUMsU0FBUyxrQkFLOUJ4SSxFQUFFLGdCQUFnQnlJLE1BQU16QyxHQUN4QmhHLEVBQUUsMEJBQTBCeUksTUFBTSxXQUFZbEQsR0FBUyxLQUN2RHZGLEVBQUUsMkJBQTJCeUksTUFBT3BELEdBQ3BDckYsRUFBRSxlQUFlMEksS0FBSzdCLEdBQ3RCN0csRUFBRSxjQUFjMEgsR0FBRyxRQUFRL0csR0FDM0JYLEVBQUUsWUFBWXlJLE1BQU1YLEdBQ3BCOUgsRUFBRVksUUFBUStILEtBQUt4SSIsImZpbGUiOiJjb21tb24uanMiLCJzb3VyY2VzQ29udGVudCI6WyIkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpe1xyXG5cdC8vSW5pdFxyXG5cdHZhciBvID17XHJcblx0XHR3cnA6ICQoJy53cmFwcGVyJyksXHJcblx0XHRsb2FkaW5nOiAkKCcubG9hZGluZycpLFxyXG5cdFx0bG9hZGluZ19udW06IDAsXHJcblx0XHRtZW51X3RpbWVvdXQ6JycsXHJcblx0XHRpa25vd190aW1lb3V0OicnLFxyXG5cdFx0b3JnX3N0cmVldDogMTc5LFxyXG5cdFx0c3RyZWV0X2FscGhhOiAwLFxyXG5cdFx0c3RyZWV0X2N0cmw6IHRydWUsXHJcblx0XHRzdHJlZXRfZGVnOjAsXHJcblx0XHRub3dfZXZlbnQ6MFxyXG5cdH07XHJcblx0JCgnLnN0cmVldCcpLmNsb25lKCkuYXBwZW5kVG8oJy5zdHJlZXRfYWxsX2luJyk7XHJcblxyXG5cdFxyXG5cclxuXHQvL0FkZExpc3RlbmVyXHJcblx0JCgnLmV2ZW50X3BvaW50JykuY2xpY2soZXZlbnRfcG9pbnRfY2xpY2spO1xyXG5cdCQoJy5ldmVudF9wb3B1cCAuY2xvc2VidG4nKS5jbGljayhmdW5jdGlvbigpeyBzaG93X3BvcChmYWxzZSk7IH0pXHJcblx0JCgnLmV2ZW50X3BvcHVwXzFfdmlkZW9idG4nKS5jbGljayggcGxheXZpZGVvICk7XHJcblx0JCgnLnN0cmVldF9hbGwnKS5lYWNoKHN0cmVldF9hbGwpO1xyXG5cdCQoJy5pa25vd19idG4nKS5vbignY2xpY2snLGlrbm93X2NsaWNrKTtcclxuXHQkKCcubWVudWJ0bicpLmNsaWNrKG1lbnVidG5fY2xpY2spO1xyXG5cdCQod2luZG93KS5sb2FkKHdpbmRvd19sb2FkKTtcclxuXHRmdW5jdGlvbiB3aW5kb3dfbG9hZCgpe1xyXG5cdFx0by5zdHJlZXRfd2lkdGggPSAkKCcuc3RyZWV0JykuZXEoMCkud2lkdGgoKTtcclxuXHRcdCQoJy5zdHJlZXQnKS5lcSgxKS5jc3MoJ2xlZnQnLG8uc3RyZWV0X3dpZHRoKTtcclxuXHRcdCQoJy5zdHJlZXRfYWxsJykuY3NzKCdtYXJnaW4tbGVmdCcsby5zdHJlZXRfd2lkdGgqLTEpO1xyXG5cdFx0by5pa25vd190aW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbigpeyBpa25vd19jbGljaygpO30sNTMwMCk7XHJcblx0XHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignZGV2aWNlb3JpZW50YXRpb24nLCBmdW5jdGlvbihlKXtcclxuXHRcdFx0d2luZG93X2RldmljZW9yaWVudGF0aW9uKGUpO1xyXG5cdFx0fSk7XHJcblx0XHRvLmxvYWRpbmdfbnVtICs9MTtcclxuXHRcdGNyZWF0anNfbG9hZGluZygpO1xyXG5cdFx0Ly8gY3JlYXRlanNfZXZlbnQwNCgpO1xyXG5cdFx0Ly8gY3JlYXRqc19zdGFydCgpO1xyXG5cdH1cclxuXHRmdW5jdGlvbiBjaGVja19sb2FkaW5nKCl7XHJcblx0XHRpZihvLmxvYWRpbmdfbnVtID49Mikgby5sb2FkaW5nLmZhZGVPdXQoMzAwLGZ1bmN0aW9uKCl7IG8ubG9hZGluZy5yZW1vdmUoKTsgfSk7XHJcblx0fVxyXG5cdGZ1bmN0aW9uIGNyZWF0anNfbG9hZGluZygpe1xyXG5cdFx0dmFyIGNhbnZhcywgZXhwb3J0Um9vdDtcclxuXHRcdGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibG9hZGluZ1wiKTtcclxuXHRcdGltYWdlcyA9IGltYWdlc3x8e307XHJcblx0XHRzcyA9IHNzfHx7fTtcclxuXHJcblx0XHR2YXIgbG9hZGVyID0gbmV3IGNyZWF0ZWpzLkxvYWRRdWV1ZShmYWxzZSk7XHJcblx0XHRsb2FkZXIuYWRkRXZlbnRMaXN0ZW5lcihcImZpbGVsb2FkXCIsIGhhbmRsZUZpbGVMb2FkKTtcclxuXHRcdGxvYWRlci5hZGRFdmVudExpc3RlbmVyKFwiY29tcGxldGVcIiwgaGFuZGxlQ29tcGxldGUpO1xyXG5cdFx0bG9hZGVyLmxvYWRGaWxlKHtzcmM6XCJpbWFnZXMvbG9hZGluZ19hbmlfYXRsYXNfLmpzb25cIiwgdHlwZTpcInNwcml0ZXNoZWV0XCIsIGlkOlwibG9hZGluZ19hbmlfYXRsYXNfXCJ9LCB0cnVlKTtcclxuXHRcdGxvYWRlci5sb2FkTWFuaWZlc3QobGliMi5wcm9wZXJ0aWVzLm1hbmlmZXN0KTtcclxuXHRcdFxyXG5cdFx0ZnVuY3Rpb24gaGFuZGxlRmlsZUxvYWQoZXZ0KSB7XHJcblx0XHRcdGlmIChldnQuaXRlbS50eXBlID09IFwiaW1hZ2VcIikgeyBpbWFnZXNbZXZ0Lml0ZW0uaWRdID0gZXZ0LnJlc3VsdDsgfVxyXG5cdFx0fVxyXG5cclxuXHRcdGZ1bmN0aW9uIGhhbmRsZUNvbXBsZXRlKGV2dCkge1xyXG5cdFx0XHR2YXIgcXVldWUgPSBldnQudGFyZ2V0O1xyXG5cdFx0XHRzc1tcImxvYWRpbmdfYW5pX2F0bGFzX1wiXSA9IHF1ZXVlLmdldFJlc3VsdChcImxvYWRpbmdfYW5pX2F0bGFzX1wiKTtcclxuXHRcdFx0ZXhwb3J0Um9vdCA9IG5ldyBsaWIyLmxvYWRpbmdfYW5pKCk7XHJcblxyXG5cdFx0XHRvLmxvYWRpbmdfc3RhZ2UgPSBuZXcgY3JlYXRlanMuU3RhZ2UoY2FudmFzKTtcclxuXHRcdFx0by5sb2FkaW5nX3N0YWdlLmFkZENoaWxkKGV4cG9ydFJvb3QpO1xyXG5cdFx0XHRvLmxvYWRpbmdfc3RhZ2UudXBkYXRlKCk7XHJcblx0XHRcdGNyZWF0ZWpzLlRpY2tlci5zZXRGUFMoMzApO1xyXG5cdFx0XHRjcmVhdGVqcy5UaWNrZXIuYWRkRXZlbnRMaXN0ZW5lcihcInRpY2tcIiwgU3RhZ2VMaXN0ZW50ZXIpO1xyXG5cdFx0XHQvLyBjcmVhdGpzX3N0YXJ0KCk7XHJcblx0XHRcdGNyZWF0ZWpzX2V2ZW50MDQoKTtcclxuXHRcdH1cclxuXHR9XHJcblx0ZnVuY3Rpb24gY3JlYXRlanNfZXZlbnQwNCgpe1xyXG5cdFx0dmFyIGNhbnZhcywgZXhwb3J0Um9vdDtcclxuXHRcdGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibG9hZGluZ1wiKTtcclxuXHRcdGltYWdlcyA9IGltYWdlc3x8e307XHJcblx0XHRzcyA9IHNzfHx7fTtcclxuXHJcblx0XHR2YXIgbG9hZGVyID0gbmV3IGNyZWF0ZWpzLkxvYWRRdWV1ZShmYWxzZSk7XHJcblx0XHRsb2FkZXIuYWRkRXZlbnRMaXN0ZW5lcihcImZpbGVsb2FkXCIsIGhhbmRsZUZpbGVMb2FkKTtcclxuXHRcdGxvYWRlci5hZGRFdmVudExpc3RlbmVyKFwiY29tcGxldGVcIiwgaGFuZGxlQ29tcGxldGUpO1xyXG5cdFx0bG9hZGVyLmxvYWRGaWxlKHtzcmM6XCJpbWFnZXMvZXZlbnQwNF9hdGxhc18uanNvblwiLCB0eXBlOlwic3ByaXRlc2hlZXRcIiwgaWQ6XCJldmVudDA0X2F0bGFzX1wifSwgdHJ1ZSk7XHJcblx0XHRsb2FkZXIubG9hZE1hbmlmZXN0KGxpYjMucHJvcGVydGllcy5tYW5pZmVzdCk7XHJcblx0XHRcclxuXHRcdGZ1bmN0aW9uIGhhbmRsZUZpbGVMb2FkKGV2dCkge1xyXG5cdFx0XHRpZiAoZXZ0Lml0ZW0udHlwZSA9PSBcImltYWdlXCIpIHsgaW1hZ2VzW2V2dC5pdGVtLmlkXSA9IGV2dC5yZXN1bHQ7IH1cclxuXHRcdH1cclxuXHJcblx0XHRmdW5jdGlvbiBoYW5kbGVDb21wbGV0ZShldnQpIHtcclxuXHRcdFx0dmFyIHF1ZXVlID0gZXZ0LnRhcmdldDtcclxuXHRcdFx0c3NbXCJldmVudDA0X2F0bGFzX1wiXSA9IHF1ZXVlLmdldFJlc3VsdChcImV2ZW50MDRfYXRsYXNfXCIpO1xyXG5cclxuXHRcdFx0by5ldmVudF9wb3B1cF80X3N0YWdlID0gbmV3IGNyZWF0ZWpzLlN0YWdlKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZXZlbnRfcG9wdXBfNF9hbmlcIikpO1xyXG5cdFx0XHRvLmV2ZW50X3BvcHVwXzRfYW5pID0gby5ldmVudF9wb3B1cF80X3N0YWdlLmFkZENoaWxkKG5ldyBsaWIzLmV2ZW50MDRfMSgpKTtcclxuXHRcdFx0by5ldmVudF9wb3B1cF80X2FuaS5zZXRUcmFuc2Zvcm0oMzc1LDY2NykuZ290b0FuZFN0b3AoMCk7XHJcblx0XHRcdG8uZXZlbnRfcG9wdXBfNF9zdGFnZS51cGRhdGUoKTtcclxuXHJcblx0XHRcdGNyZWF0anNfc3RhcnQoKTtcclxuXHRcdH1cclxuXHR9XHJcblx0ZnVuY3Rpb24gY3JlYXRqc19zdGFydCgpe1xyXG5cdFx0Ly9jcmVhdGVqc1xyXG5cdFx0by5ldmVudF9ib3hfYmcgPSB7XHJcblx0XHRcdGltYWdlczogW1wiaW1hZ2VzL2V2ZW50X2JveF9iZy5wbmdcIl0sXHJcblx0XHRcdGZyYW1lczoge3dpZHRoOjc1MCwgaGVpZ2h0OjI2MH0sXHJcblx0XHRcdGFuaW1hdGlvbnM6IHtcclxuXHRcdFx0XHRzdGFuZDowLFxyXG5cdFx0XHRcdHNob3c6e1xyXG5cdFx0XHRcdFx0XHRmcmFtZXM6IFswLDgsMSw5LDIsMTAsMywxMSw0LDEyLDUsMTMsNiwxNCw3XSxcclxuXHRcdFx0XHRcdFx0c3BlZWQ6IDFcclxuXHRcdFx0XHR9LFxyXG5cdFx0XHRcdGJhY2tzaG93OntcclxuXHRcdFx0XHRcdFx0ZnJhbWVzOiBbNywxNCw2LDEzLDUsMTIsNCwxMSwzLDEwLDIsOSwxLDgsMF0sXHJcblx0XHRcdFx0XHRcdHNwZWVkOiAxXHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9O1xyXG5cdFx0by5ldmVudF9ib3hfYmdfc3ByaXRlU2hlZXQgPSBuZXcgY3JlYXRlanMuU3ByaXRlU2hlZXQoby5ldmVudF9ib3hfYmcpO1xyXG5cdFx0by5ldmVudF9ib3hfYmdfY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJldmVudF9ib3hfYmdcIik7XHJcblx0XHRvLmV2ZW50X2JveF9iZ19zdGFnZSA9IG5ldyBjcmVhdGVqcy5TdGFnZShvLmV2ZW50X2JveF9iZ19jYW52YXMpO1xyXG5cclxuXHRcdGltYWdlcyA9IGltYWdlc3x8e307XHJcblx0XHRzcyA9IHNzfHx7fTtcclxuXHJcblx0XHR2YXIgbG9hZGVyID0gbmV3IGNyZWF0ZWpzLkxvYWRRdWV1ZShmYWxzZSk7XHJcblx0XHRsb2FkZXIuYWRkRXZlbnRMaXN0ZW5lcihcImZpbGVsb2FkXCIsIGhhbmRsZUZpbGVMb2FkKTtcclxuXHRcdGxvYWRlci5hZGRFdmVudExpc3RlbmVyKFwiY29tcGxldGVcIiwgaGFuZGxlQ29tcGxldGUpO1xyXG5cdFx0bG9hZGVyLmxvYWRGaWxlKHtzcmM6XCJpbWFnZXMvZXZlbnRfcG9wdXBfYXRsYXNfLmpzb25cIiwgdHlwZTpcInNwcml0ZXNoZWV0XCIsIGlkOlwiZXZlbnRfcG9wdXBfYXRsYXNfXCJ9LCB0cnVlKTtcclxuXHRcdGxvYWRlci5sb2FkTWFuaWZlc3QobGliLnByb3BlcnRpZXMubWFuaWZlc3QpO1xyXG5cdFx0XHJcblx0XHRmdW5jdGlvbiBoYW5kbGVGaWxlTG9hZChldnQpIHtcclxuXHRcdFx0aWYgKGV2dC5pdGVtLnR5cGUgPT0gXCJpbWFnZVwiKSB7IGltYWdlc1tldnQuaXRlbS5pZF0gPSBldnQucmVzdWx0OyB9XHJcblx0XHR9XHJcblxyXG5cdFx0ZnVuY3Rpb24gaGFuZGxlQ29tcGxldGUoZXZ0KSB7XHJcblx0XHRcdHZhciBxdWV1ZSA9IGV2dC50YXJnZXQ7XHJcblx0XHRcdHNzW1wiZXZlbnRfcG9wdXBfYXRsYXNfXCJdID0gcXVldWUuZ2V0UmVzdWx0KFwiZXZlbnRfcG9wdXBfYXRsYXNfXCIpO1xyXG5cclxuXHRcdFx0Ly8gby5sb2FkaW5nX3N0YWdlID0gbmV3IGNyZWF0ZWpzLlN0YWdlKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibG9hZGluZ1wiKSk7XHJcblx0XHRcdC8vIG8ubG9hZGluZ19hbmkgPSBvLmxvYWRpbmdfc3RhZ2UuYWRkQ2hpbGQobmV3IGxpYi5sb2FkaW5nKCkpO1xyXG5cdFx0XHQvLyBvLmxvYWRpbmdfYW5pLnNldFRyYW5zZm9ybSgzNzUsNjY3KS5nb3RvQW5kU3RvcCgwKTtcclxuXHRcdFx0Ly8gby5sb2FkaW5nX3N0YWdlLnVwZGF0ZSgpO1xyXG5cclxuXHRcdFx0by5ldmVudF9wb3B1cF8yX3N0YWdlID0gbmV3IGNyZWF0ZWpzLlN0YWdlKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZXZlbnRfcG9wdXBfMl9hbmlcIikpO1xyXG5cdFx0XHRvLmV2ZW50X3BvcHVwXzJfYW5pID0gby5ldmVudF9wb3B1cF8yX3N0YWdlLmFkZENoaWxkKG5ldyBsaWIuZXZlbnQwMigpKTtcclxuXHRcdFx0by5ldmVudF9wb3B1cF8yX2FuaS5zZXRUcmFuc2Zvcm0oMzc1LDY2NykuZ290b0FuZFN0b3AoMCk7XHJcblx0XHRcdG8uZXZlbnRfcG9wdXBfMl9zdGFnZS51cGRhdGUoKTtcclxuXHJcblx0XHRcdG8uZXZlbnRfcG9wdXBfM19zdGFnZSA9IG5ldyBjcmVhdGVqcy5TdGFnZShkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImV2ZW50X3BvcHVwXzNfYW5pXCIpKTtcclxuXHRcdFx0by5ldmVudF9wb3B1cF8zX2FuaSA9IG8uZXZlbnRfcG9wdXBfM19zdGFnZS5hZGRDaGlsZChuZXcgbGliLmV2ZW50MDEoKSk7XHJcblx0XHRcdG8uZXZlbnRfcG9wdXBfM19hbmkuc2V0VHJhbnNmb3JtKDQ1LDE4MCkuZ290b0FuZFN0b3AoMCk7XHJcblx0XHRcdG8uZXZlbnRfcG9wdXBfM19hbmkyID0gby5ldmVudF9wb3B1cF8zX3N0YWdlLmFkZENoaWxkKG5ldyBsaWIudGFsa19ib3gwMSgpKTtcclxuXHRcdFx0by5ldmVudF9wb3B1cF8zX2FuaTIuc2V0VHJhbnNmb3JtKDQ1LDg1MCkuZ290b0FuZFN0b3AoMCk7XHJcblx0XHRcdG8uZXZlbnRfcG9wdXBfM19zdGFnZS51cGRhdGUoKTtcclxuXHJcblx0XHRcdC8vIG8uZXZlbnRfcG9wdXBfNF9zdGFnZSA9IG5ldyBjcmVhdGVqcy5TdGFnZShkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImV2ZW50X3BvcHVwXzRfYW5pXCIpKTtcclxuXHRcdFx0Ly8gby5ldmVudF9wb3B1cF80X2FuaSA9IG8uZXZlbnRfcG9wdXBfNF9zdGFnZS5hZGRDaGlsZChuZXcgbGliLmV2ZW50MDQoKSk7XHJcblx0XHRcdC8vIG8uZXZlbnRfcG9wdXBfNF9hbmkuc2V0VHJhbnNmb3JtKDM3NSw2NjcpLmdvdG9BbmRTdG9wKDApO1xyXG5cdFx0XHQvLyBvLmV2ZW50X3BvcHVwXzRfc3RhZ2UudXBkYXRlKCk7XHJcblxyXG5cdFx0XHRvLmxvYWRpbmdfbnVtKz0xO1xyXG5cdFx0XHRjaGVja19sb2FkaW5nKCk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvL0V2ZW50XHJcblx0ZnVuY3Rpb24gU3RhZ2VMaXN0ZW50ZXIoKXtcclxuXHRcdGlmKG8uc3RyZWV0X2RlZyA+PSAtNjIgJiYgby5zdHJlZXRfZGVnIDw9IC00MikgcGxheV9ldmVudF9ib3godHJ1ZSwxKTtcclxuXHRcdGVsc2UgaWYoby5zdHJlZXRfZGVnID49IC0xMjAgJiYgby5zdHJlZXRfZGVnIDw9IC0xMDApIHBsYXlfZXZlbnRfYm94KHRydWUsMik7XHJcblx0XHRlbHNlIGlmKG8uc3RyZWV0X2RlZyA+PSAtMTgwICYmIG8uc3RyZWV0X2RlZyA8PSAtMTcwKSBwbGF5X2V2ZW50X2JveCh0cnVlLDMpO1xyXG5cdFx0ZWxzZSBpZihvLnN0cmVldF9kZWcgPj0gMTcwICYmIG8uc3RyZWV0X2RlZyA8PSAxODApIHBsYXlfZXZlbnRfYm94KHRydWUsMyk7XHJcblx0XHRlbHNlIGlmKG8uc3RyZWV0X2RlZyA+PSAtMjE4ICYmIG8uc3RyZWV0X2RlZyA8PSAtMTk4KSBwbGF5X2V2ZW50X2JveCh0cnVlLDQpO1xyXG5cdFx0ZWxzZSBpZihvLnN0cmVldF9kZWcgPj0gMTQwICYmIG8uc3RyZWV0X2RlZyA8PSAxNjApIHBsYXlfZXZlbnRfYm94KHRydWUsNCk7XHJcblx0XHRlbHNlIGlmKG8uc3RyZWV0X2RlZyA+PSAtMjk3ICYmIG8uc3RyZWV0X2RlZyA8PSAtMjc3KSBwbGF5X2V2ZW50X2JveCh0cnVlLDUpO1xyXG5cdFx0ZWxzZSBpZihvLnN0cmVldF9kZWcgPj0gNjAgJiYgby5zdHJlZXRfZGVnIDw9IDgwKSBwbGF5X2V2ZW50X2JveCh0cnVlLDUpO1xyXG5cdFx0ZWxzZSBwbGF5X2V2ZW50X2JveChmYWxzZSk7XHJcblxyXG5cdFx0aWYoby5ldmVudF9ib3hfYmdfc3RhZ2UpIG8uZXZlbnRfYm94X2JnX3N0YWdlLnVwZGF0ZSgpO1xyXG5cdFx0aWYoby5sb2FkaW5nX3N0YWdlKSBvLmxvYWRpbmdfc3RhZ2UudXBkYXRlKCk7XHJcblx0XHRpZihvLmV2ZW50X3BvcHVwXzJfc3RhZ2UpIG8uZXZlbnRfcG9wdXBfMl9zdGFnZS51cGRhdGUoKTtcclxuXHRcdGlmKG8uZXZlbnRfcG9wdXBfM19zdGFnZSkgby5ldmVudF9wb3B1cF8zX3N0YWdlLnVwZGF0ZSgpO1xyXG5cdFx0aWYoby5ldmVudF9wb3B1cF80X3N0YWdlKSBvLmV2ZW50X3BvcHVwXzRfc3RhZ2UudXBkYXRlKCk7XHJcblx0fVxyXG5cdGZ1bmN0aW9uIHBsYXl2aWRlbygpe1xyXG5cdFx0JCgnLmV2ZW50X3BvcHVwXzFfdmlkZW9idG4nKS5mYWRlT3V0KCk7XHJcblx0XHQkKCcjZXZlbnRfcG9wdXBfMV92aWRlbycpWzBdLnBsYXkoKTtcclxuXHR9XHJcblx0ZnVuY3Rpb24gc2hvd19wb3AoX3Qpe1xyXG5cdFx0aWYoX3Qpe1xyXG5cdFx0XHQkKCcuZXZlbnRfcG9wdXAgLnBvcHVwJykuZXEoby5ub3dfZXZlbnQgLSAxKS5zaG93KCk7XHJcblx0XHRcdCQoJy5ldmVudF9wb3B1cCcpLmZhZGVJbigzMDAsZXZlbnRfcG9wdXBfc3RhcnQpO1xyXG5cdFx0XHRmdW5jdGlvbiBldmVudF9wb3B1cF9zdGFydCgpeyBcclxuXHRcdFx0XHQkKCcuZXZlbnRfcG9wdXAgLnBvcHVwJykuZXEoby5ub3dfZXZlbnQgLSAxKS5hZGRDbGFzcygnb24nKTsgXHJcblx0XHRcdFx0cG9wdXBfYW5pX3BsYXkodHJ1ZSk7XHJcblx0XHRcdH1cclxuXHRcdH1lbHNlICQoJy5ldmVudF9wb3B1cCcpLmZhZGVPdXQoMzAwLGZ1bmN0aW9uKCl7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdCQoJy5ldmVudF9wb3B1cCAucG9wdXAnKS5oaWRlKCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdG8uc3RyZWV0X2N0cmwgPSB0cnVlOyBcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdH0pO1xyXG5cdH1cclxuXHRmdW5jdGlvbiBwb3B1cF9hbmlfcGxheShfdCl7XHJcblx0XHRpZihfdCl7XHJcblx0XHRcdGlmKG8ubm93X2V2ZW50ID09IDMpIG8uZXZlbnRfcG9wdXBfMl9hbmkucGxheSgpO1xyXG5cdFx0XHRlbHNlIGlmKG8ubm93X2V2ZW50ID09IDIpe1xyXG5cdFx0XHRcdG8uZXZlbnRfcG9wdXBfM19hbmkucGxheSgpO1xyXG5cdFx0XHRcdG8uZXZlbnRfcG9wdXBfM19hbmkyLnBsYXkoKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRlbHNlIGlmKG8ubm93X2V2ZW50ID09IDQpIG8uZXZlbnRfcG9wdXBfNF9hbmkucGxheSgpO1xyXG5cdFx0fWVsc2V7XHJcblx0XHRcdGlmKG8ubm93X2V2ZW50ID09IDIpIG8uZXZlbnRfcG9wdXBfMl9hbmkuZ290b0FuZFN0b3AoMCk7XHJcblx0XHRcdGVsc2UgaWYoby5ub3dfZXZlbnQgPT0gMyl7XHJcblx0XHRcdFx0by5ldmVudF9wb3B1cF8zX2FuaS5nb3RvQW5kU3RvcCgwKTtcclxuXHRcdFx0XHRvLmV2ZW50X3BvcHVwXzNfYW5pMi5nb3RvQW5kU3RvcCgwKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRlbHNlIGlmKG8ubm93X2V2ZW50ID09IDQpIG8uZXZlbnRfcG9wdXBfNF9hbmkuZ290b0FuZFN0b3AoMCk7XHJcblx0XHR9XHJcblx0fVxyXG5cdGZ1bmN0aW9uIGV2ZW50X3BvaW50X2NsaWNrKCl7XHJcblx0XHRvLnN0cmVldF9jdHJsID0gZmFsc2U7XHJcblx0XHRvLm5vd19ldmVudCA9ICQodGhpcykuaW5kZXgoKSArIDE7XHJcblx0XHRjb25zb2xlLmxvZyhvLm5vd19ldmVudCk7XHJcblx0XHRzaG93X3BvcCh0cnVlKTtcclxuXHR9XHJcblx0ZnVuY3Rpb24gcGxheV9ldmVudF9ib3goX3QsX24pe1xyXG5cdFx0aWYoX3Qpe1xyXG5cdFx0XHRpZihvLm5vd19ldmVudCA9PSBfbikgcmV0dXJuO1xyXG5cdFx0XHRlbHNlIG8ubm93X2V2ZW50ID0gX247XHJcblx0XHRcdGlmKCFvLmV2ZW50X2JveF9iZ19zdGFnZSkgcmV0dXJuO1xyXG5cdFx0XHRvLmV2ZW50X2JveF9iZ19zdGFnZS5yZW1vdmVBbGxDaGlsZHJlbigpO1xyXG5cdFx0XHRvLmV2ZW50X2JveF9iZ19tYyA9IG8uZXZlbnRfYm94X2JnX3N0YWdlLmFkZENoaWxkKG5ldyBjcmVhdGVqcy5TcHJpdGUoby5ldmVudF9ib3hfYmdfc3ByaXRlU2hlZXQsIFwic2hvd1wiKSk7XHJcblx0XHRcdG8uZXZlbnRfYm94X2JnX21jLmFkZEV2ZW50TGlzdGVuZXIoXCJhbmltYXRpb25lbmRcIiwgZXZlbnRfYm94X2JnX2NvbXBsZXRlKTtcclxuXHRcdFx0JCgnLmV2ZW50X2JveCcpLmFkZENsYXNzKCdvbicpO1xyXG5cdFx0XHQkKCcuZXZlbnRfYm94JykuZmluZCgnc3BhbicpLnJlbW92ZUNsYXNzKCdvbicpLmVxKF9uKS5hZGRDbGFzcygnb24nKTtcclxuXHRcdFx0JCgnLmV2ZW50X2xpbmUnKS5maW5kKCcuaWNvbicpLnJlbW92ZUNsYXNzKCdvbicpLmVxKCBfbiAtIDEpLmFkZENsYXNzKCdvbicpO1xyXG5cdFx0fWVsc2V7XHJcblx0XHRcdGlmKG8ubm93X2V2ZW50ID09IDApIHJldHVybjtcclxuXHRcdFx0ZWxzZSBvLm5vd19ldmVudCA9IDA7XHJcblx0XHRcdG8uZXZlbnRfYm94X2JnX3N0YWdlLnJlbW92ZUFsbENoaWxkcmVuKCk7XHJcblx0XHRcdG8uZXZlbnRfYm94X2JnX21jID0gby5ldmVudF9ib3hfYmdfc3RhZ2UuYWRkQ2hpbGQobmV3IGNyZWF0ZWpzLlNwcml0ZShvLmV2ZW50X2JveF9iZ19zcHJpdGVTaGVldCwgXCJiYWNrc2hvd1wiKSk7XHJcblx0XHRcdG8uZXZlbnRfYm94X2JnX21jLmFkZEV2ZW50TGlzdGVuZXIoXCJhbmltYXRpb25lbmRcIiwgZXZlbnRfYm94X2JnX2NvbXBsZXRlKTtcclxuXHRcdFx0JCgnLmV2ZW50X2JveCcpLnJlbW92ZUNsYXNzKCdvbicpO1xyXG5cdFx0XHQkKCcuZXZlbnRfYm94JykuZmluZCgnc3BhbicpLnJlbW92ZUNsYXNzKCdvbicpO1xyXG5cdFx0XHQkKCcuZXZlbnRfbGluZScpLmZpbmQoJy5pY29uJykucmVtb3ZlQ2xhc3MoJ29uJylcclxuXHRcdH1cclxuXHR9XHJcblx0ZnVuY3Rpb24gZXZlbnRfYm94X2JnX2NvbXBsZXRlKCl7XHJcblx0XHRvLmV2ZW50X2JveF9iZ19tYy5zdG9wKCk7XHJcblx0fVxyXG5cdGZ1bmN0aW9uIHN0cmVldF9hbGwoKXtcclxuXHRcdHZhciBfdGhpcyA9ICQodGhpcyksXHJcblx0XHRcdG9nX2xlZnQgPSAwLFxyXG5cdFx0XHRkcmFnX2xlZnQgPSAwLFxyXG5cdFx0XHR0bXBfb3JnX3N0cmVldDtcclxuXHJcblx0XHRfdGhpcy5vbigndG91Y2hzdGFydCcsIGZ1bmN0aW9uKGUpe1xyXG5cdFx0XHQvLyBlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdGlmKGRldmljZS5tb2JpbGUoKSl7ZSA9IGUub3JpZ2luYWxFdmVudC50b3VjaGVzWzBdO31cclxuXHRcdFx0b2dfbGVmdCA9IGUucGFnZVg7XHJcblx0XHRcdF90aGlzLmFkZENsYXNzKCdtb3ZlJyk7XHJcblx0XHRcdG8uc3RyZWV0X2N0cmwgPSBmYWxzZTtcclxuXHRcdFx0dG1wX29yZ19zdHJlZXQgPSBvLm9yZ19zdHJlZXQ7XHJcblx0XHRcdF90aGlzLmJpbmQoJ3RvdWNobW92ZScsIF90b3VjaG1vdmUpO1xyXG5cdFx0fSk7XHJcblx0XHRfdGhpcy5vbigndG91Y2hlbmQnLCBmdW5jdGlvbigpe1xyXG5cdFx0XHQvLyBlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdF90aGlzLnJlbW92ZUNsYXNzKCdtb3ZlJyk7XHJcblx0XHRcdG8uc3RyZWV0X2N0cmwgPSB0cnVlO1xyXG5cdFx0XHRfdGhpcy51bmJpbmQoJ3RvdWNobW92ZScsIF90b3VjaG1vdmUpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0ZnVuY3Rpb24gX3RvdWNobW92ZShlKXtcclxuXHRcdFx0aWYoZGV2aWNlLm1vYmlsZSgpKXtlID0gZS5vcmlnaW5hbEV2ZW50LnRvdWNoZXNbMF07fVxyXG4gICAgICAgICAgICBkcmFnX2xlZnQgPSBlLnBhZ2VYIC0gb2dfbGVmdDtcclxuXHRcdFx0by5vcmdfc3RyZWV0ID0gdG1wX29yZ19zdHJlZXQgLSBkcmFnX2xlZnQgLyAkKHdpbmRvdykud2lkdGgoKSAqIDEyMDtcclxuXHRcdFx0aWYoby5vcmdfc3RyZWV0IDwgMCkgby5vcmdfc3RyZWV0ID0gby5vcmdfc3RyZWV0ICsgMzYwO1xyXG5cdFx0XHRlbHNlIGlmKG8ub3JnX3N0cmVldCA+IDM2MCkgby5vcmdfc3RyZWV0ID0gby5vcmdfc3RyZWV0IC0zNjA7XHJcblx0XHRcdHN0cmVldF9tb3ZlKCk7XHJcblx0XHR9XHJcblx0fVxyXG5cdGZ1bmN0aW9uIGlrbm93X2NsaWNrKCl7XHJcblx0XHRjbGVhclRpbWVvdXQoby5pa25vd190aW1lb3V0KTtcclxuXHRcdCQoJy50aXBfYm94JykuZmFkZU91dCgpO1xyXG5cdH1cclxuXHRmdW5jdGlvbiBtZW51YnRuX2NsaWNrKCl7XHJcblx0XHRpZigkKHRoaXMpLmhhc0NsYXNzKCdvbicpKXtcclxuXHRcdFx0JCgnLm1lbnVEb20nKS5yZW1vdmVDbGFzcygnb24nKTtcclxuXHRcdFx0JCgnLm1lbnUnKS5hZGRDbGFzcygnb2ZmJykucmVtb3ZlQ2xhc3MoJ29uJyk7XHJcblx0XHRcdG8ubWVudV90aW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRvLnN0cmVldF9jdHJsID0gdHJ1ZTtcclxuXHRcdFx0XHQkKCcubWVudScpLnJlbW92ZUNsYXNzKCdvZmYnKTtcclxuXHRcdFx0fSwgMTAwMCk7XHJcblx0XHR9XHJcblx0XHRlbHNle1xyXG5cdFx0XHRvLnN0cmVldF9jdHJsID0gZmFsc2U7XHJcblx0XHRcdCQoJy5tZW51RG9tJykuYWRkQ2xhc3MoJ29uJyk7XHJcblx0XHRcdGNsZWFyVGltZW91dChvLm1lbnVfdGltZW91dCk7XHJcblx0XHRcdCQoJy5tZW51JykucmVtb3ZlQ2xhc3MoJ29mZicpLmFkZENsYXNzKCdvbicpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRmdW5jdGlvbiB3aW5kb3dfZGV2aWNlb3JpZW50YXRpb24oZSkge1xyXG5cdFx0by5zdHJlZXRfYWxwaGEgPSBlLmFscGhhO1xyXG5cdFx0aWYoby5zdHJlZXRfY3RybCkgc3RyZWV0X21vdmUoKTtcclxuXHR9XHJcblx0ZnVuY3Rpb24gc3RyZWV0X21vdmUoKXtcclxuXHRcdG8uc3RyZWV0X3dpZHRoID0gJCgnLnN0cmVldCcpLmVxKDApLndpZHRoKCk7XHJcblx0XHQkKCcuc3RyZWV0JykuZXEoMSkuY3NzKCdsZWZ0JyxvLnN0cmVldF93aWR0aCk7XHJcblx0XHQkKCcuc3RyZWV0X2FsbCcpLmNzcygnbWFyZ2luLWxlZnQnLG8uc3RyZWV0X3dpZHRoKi0xKTtcclxuXHRcdG8uc3RyZWV0X2RlZyA9IE1hdGguZmxvb3IoIG8uc3RyZWV0X2FscGhhIC0gby5vcmdfc3RyZWV0KTtcclxuXHRcdC8vICQoJy5wb3AnKS5odG1sKG8uc3RyZWV0X2RlZyk7XHJcblx0XHR2YXIgZGlzID0gTWF0aC5mbG9vcihvLnN0cmVldF93aWR0aCAvIDM2MCAqIG8uc3RyZWV0X2RlZyArICQod2luZG93KS53aWR0aCgpKTtcclxuXHRcdCQoJy5zdHJlZXRfYWxsJykuY3NzKCdsZWZ0JyxkaXMpO1xyXG5cdH1cclxuXHRcclxufSkvL3JlYWR5IGVuZCAgXHJcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
