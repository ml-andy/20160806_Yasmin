$(document).ready(function(){function e(e){"image"==e.item.type&&(images[e.item.id]=e.result)}function t(e){var t=e.target;ss.event_popup_atlas_=t.getResult("event_popup_atlas_"),u.event_popup_2_stage=new createjs.Stage(document.getElementById("event_popup_2_ani")),u.event_popup_2_ani=u.event_popup_2_stage.addChild(new lib.event02),u.event_popup_2_ani.setTransform(375,667).gotoAndStop(0),u.event_popup_2_stage.update()}function n(){u.loading.fadeOut(),u.street_width=$(".street").eq(0).width(),$(".street").eq(1).css("left",u.street_width),$(".street_all").css("margin-left",u.street_width*-1),u.iknow_timeout=setTimeout(function(){d()},5300),window.addEventListener("deviceorientation",function(e){l(e)})}function o(){u.street_deg>=-62&&u.street_deg<=-42?a(!0,1):u.street_deg>=-120&&u.street_deg<=-100?a(!0,2):u.street_deg>=-180&&u.street_deg<=-170?a(!0,3):u.street_deg>=170&&u.street_deg<=180?a(!0,3):u.street_deg>=-218&&u.street_deg<=-198?a(!0,4):u.street_deg>=140&&u.street_deg<=160?a(!0,4):u.street_deg>=-297&&u.street_deg<=-277?a(!0,5):u.street_deg>=60&&u.street_deg<=80?a(!0,5):a(!1),u.event_box_bg_stage.update(),u.event_popup_2_stage&&u.event_popup_2_stage.update()}function s(){$(".event_popup_1_videobtn").fadeOut(),$("#event_popup_1_video")[0].play()}function _(e,t){e?($(".event_popup .popup").eq(t).show(),$(".event_popup").fadeIn(300,function(){$(".event_popup .popup").eq(t).addClass("on")})):$(".event_popup").fadeOut()}function a(e,t){if(e){if(u.now_event==t)return;u.now_event=t,u.event_box_bg_stage.removeAllChildren(),u.event_box_bg_mc=u.event_box_bg_stage.addChild(new createjs.Sprite(u.event_box_bg_spriteSheet,"show")),u.event_box_bg_mc.addEventListener("animationend",r),$(".event_box").addClass("on"),$(".event_box").find("span").removeClass("on").eq(t).addClass("on"),$(".event_line").find(".icon").removeClass("on").eq(t-1).addClass("on")}else{if(0==u.now_event)return;u.now_event=0,u.event_box_bg_stage.removeAllChildren(),u.event_box_bg_mc=u.event_box_bg_stage.addChild(new createjs.Sprite(u.event_box_bg_spriteSheet,"backshow")),u.event_box_bg_mc.addEventListener("animationend",r),$(".event_box").removeClass("on"),$(".event_box").find("span").removeClass("on"),$(".event_line").find(".icon").removeClass("on")}}function r(){u.event_box_bg_mc.stop()}function i(){function e(e){device.mobile()&&(e=e.originalEvent.touches[0]),s=e.pageX-o,u.org_street=t-s/$(window).width()*120,u.org_street<0?u.org_street=u.org_street+360:u.org_street>360&&(u.org_street=u.org_street-360),v()}var t,n=$(this),o=0,s=0;n.on("touchstart",function(s){s.preventDefault(),device.mobile()&&(s=s.originalEvent.touches[0]),o=s.pageX,n.addClass("move"),u.street_ctrl=!1,t=u.org_street,n.bind("touchmove",e)}),n.on("touchend",function(){n.removeClass("move"),u.street_ctrl=!0,n.unbind("touchmove",e)})}function d(){clearTimeout(u.iknow_timeout),$(".tip_box").fadeOut()}function p(){$(this).hasClass("on")?($(".menuDom").removeClass("on"),$(".menu").addClass("off").removeClass("on"),u.menu_timeout=setTimeout(function(){u.street_ctrl=!0,$(".menu").removeClass("off")},1e3)):(u.street_ctrl=!1,$(".menuDom").addClass("on"),clearTimeout(u.menu_timeout),$(".menu").removeClass("off").addClass("on"))}function l(e){u.street_alpha=e.alpha,u.street_ctrl&&v()}function v(){u.street_width=$(".street").eq(0).width(),$(".street").eq(1).css("left",u.street_width),$(".street_all").css("margin-left",u.street_width*-1),u.street_deg=Math.floor(u.street_alpha-u.org_street);var e=Math.floor(u.street_width/360*u.street_deg+$(window).width());$(".street_all").css("left",e)}var u={wrp:$(".wrapper"),loading:$(".loading"),menu_timeout:"",iknow_timeout:"",org_street:179,street_alpha:0,street_ctrl:!0,street_deg:0,now_event:0};$(".street").clone().appendTo(".street_all_in"),u.event_box_bg={images:["images/event_box_bg.png"],frames:{width:750,height:260},animations:{stand:0,show:{frames:[0,8,1,9,2,10,3,11,4,12,5,13,6,14,7],speed:1},backshow:{frames:[7,14,6,13,5,12,4,11,3,10,2,9,1,8,0],speed:1}}},u.event_box_bg_spriteSheet=new createjs.SpriteSheet(u.event_box_bg),u.event_box_bg_canvas=document.getElementById("event_box_bg"),u.event_box_bg_stage=new createjs.Stage(u.event_box_bg_canvas),createjs.Ticker.setFPS(30),createjs.Ticker.addEventListener("tick",o),images=images||{},ss=ss||{};var g=new createjs.LoadQueue((!1));g.addEventListener("fileload",e),g.addEventListener("complete",t),g.loadFile({src:"images/event_popup_atlas_.json",type:"spritesheet",id:"event_popup_atlas_"},!0),g.loadManifest(lib.properties.manifest),$(".event_popup .closebtn").click(function(){_(!1)}),$(".event_popup_1_videobtn").click(s),$(".street_all").each(i),$(".iknow_btn").on("click",d),$(".menubtn").click(p),$(window).load(n)});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbW1vbi5qcyJdLCJuYW1lcyI6WyIkIiwiZG9jdW1lbnQiLCJyZWFkeSIsImhhbmRsZUZpbGVMb2FkIiwiZXZ0IiwiaXRlbSIsInR5cGUiLCJpbWFnZXMiLCJpZCIsInJlc3VsdCIsImhhbmRsZUNvbXBsZXRlIiwicXVldWUiLCJ0YXJnZXQiLCJzcyIsImdldFJlc3VsdCIsIm8iLCJldmVudF9wb3B1cF8yX3N0YWdlIiwiY3JlYXRlanMiLCJTdGFnZSIsImdldEVsZW1lbnRCeUlkIiwiZXZlbnRfcG9wdXBfMl9hbmkiLCJhZGRDaGlsZCIsImxpYiIsImV2ZW50MDIiLCJzZXRUcmFuc2Zvcm0iLCJnb3RvQW5kU3RvcCIsInVwZGF0ZSIsIndpbmRvd19sb2FkIiwibG9hZGluZyIsImZhZGVPdXQiLCJzdHJlZXRfd2lkdGgiLCJlcSIsIndpZHRoIiwiY3NzIiwiaWtub3dfdGltZW91dCIsInNldFRpbWVvdXQiLCJpa25vd19jbGljayIsIndpbmRvdyIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwid2luZG93X2RldmljZW9yaWVudGF0aW9uIiwiU3RhZ2VMaXN0ZW50ZXIiLCJzdHJlZXRfZGVnIiwicGxheV9ldmVudF9ib3giLCJldmVudF9ib3hfYmdfc3RhZ2UiLCJwbGF5dmlkZW8iLCJwbGF5Iiwic2hvd19wb3AiLCJfdCIsIl9uIiwic2hvdyIsImZhZGVJbiIsImFkZENsYXNzIiwibm93X2V2ZW50IiwicmVtb3ZlQWxsQ2hpbGRyZW4iLCJldmVudF9ib3hfYmdfbWMiLCJTcHJpdGUiLCJldmVudF9ib3hfYmdfc3ByaXRlU2hlZXQiLCJldmVudF9ib3hfYmdfY29tcGxldGUiLCJmaW5kIiwicmVtb3ZlQ2xhc3MiLCJzdG9wIiwic3RyZWV0X2FsbCIsIl90b3VjaG1vdmUiLCJkZXZpY2UiLCJtb2JpbGUiLCJvcmlnaW5hbEV2ZW50IiwidG91Y2hlcyIsImRyYWdfbGVmdCIsInBhZ2VYIiwib2dfbGVmdCIsIm9yZ19zdHJlZXQiLCJ0bXBfb3JnX3N0cmVldCIsInN0cmVldF9tb3ZlIiwiX3RoaXMiLCJ0aGlzIiwib24iLCJwcmV2ZW50RGVmYXVsdCIsInN0cmVldF9jdHJsIiwiYmluZCIsInVuYmluZCIsImNsZWFyVGltZW91dCIsIm1lbnVidG5fY2xpY2siLCJoYXNDbGFzcyIsIm1lbnVfdGltZW91dCIsInN0cmVldF9hbHBoYSIsImFscGhhIiwiTWF0aCIsImZsb29yIiwiZGlzIiwid3JwIiwiY2xvbmUiLCJhcHBlbmRUbyIsImV2ZW50X2JveF9iZyIsImZyYW1lcyIsImhlaWdodCIsImFuaW1hdGlvbnMiLCJzdGFuZCIsInNwZWVkIiwiYmFja3Nob3ciLCJTcHJpdGVTaGVldCIsImV2ZW50X2JveF9iZ19jYW52YXMiLCJUaWNrZXIiLCJzZXRGUFMiLCJsb2FkZXIiLCJMb2FkUXVldWUiLCJsb2FkRmlsZSIsInNyYyIsImxvYWRNYW5pZmVzdCIsInByb3BlcnRpZXMiLCJtYW5pZmVzdCIsImNsaWNrIiwiZWFjaCIsImxvYWQiXSwibWFwcGluZ3MiOiJBQUFBQSxFQUFFQyxVQUFVQyxNQUFNLFdBOENqQixRQUFTQyxHQUFlQyxHQUNGLFNBQWpCQSxFQUFJQyxLQUFLQyxPQUFtQkMsT0FBT0gsRUFBSUMsS0FBS0csSUFBTUosRUFBSUssUUFHM0QsUUFBU0MsR0FBZU4sR0FDdkIsR0FBSU8sR0FBUVAsRUFBSVEsTUFDaEJDLElBQXVCLG1CQUFJRixFQUFNRyxVQUFVLHNCQUUzQ0MsRUFBRUMsb0JBQXNCLEdBQUlDLFVBQVNDLE1BQU1qQixTQUFTa0IsZUFBZSxzQkFDbkVKLEVBQUVLLGtCQUFvQkwsRUFBRUMsb0JBQW9CSyxTQUFTLEdBQUlDLEtBQUlDLFNBQzdEUixFQUFFSyxrQkFBa0JJLGFBQWEsSUFBSSxLQUFLQyxZQUFZLEdBQ3REVixFQUFFQyxvQkFBb0JVLFNBVXZCLFFBQVNDLEtBQ1JaLEVBQUVhLFFBQVFDLFVBQ1ZkLEVBQUVlLGFBQWU5QixFQUFFLFdBQVcrQixHQUFHLEdBQUdDLFFBQ3BDaEMsRUFBRSxXQUFXK0IsR0FBRyxHQUFHRSxJQUFJLE9B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RyxFQUFPbEUsaUJBQWlCLFdBQVk1QixHQUNwQzhGLEVBQU9FLFVBQVVDLElBQUksaUNBQWtDckcsS0FBSyxjQUFlRSxHQUFHLHVCQUF1QixHQUNyR2dHLEVBQU9JLGFBQWF0RixJQUFJdUYsV0FBV0MsVUFpQm5DOUcsRUFBRSwwQkFBMEIrRyxNQUFNLFdBQVloRSxHQUFTLEtBQ3ZEL0MsRUFBRSwyQkFBMkIrRyxNQUFPbEUsR0FDcEM3QyxFQUFFLGVBQWVnSCxLQUFLbEQsR0FDdEI5RCxFQUFFLGNBQWM0RSxHQUFHLFFBQVF4QyxHQUMzQnBDLEVBQUUsWUFBWStHLE1BQU03QixHQUNwQmxGLEVBQUVxQyxRQUFRNEUsS0FBS3RGIiwiZmlsZSI6ImNvbW1vbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCl7XHJcblx0Ly9Jbml0XHJcblx0dmFyIG8gPXtcclxuXHRcdHdycDogJCgnLndyYXBwZXInKSxcclxuXHRcdGxvYWRpbmc6ICQoJy5sb2FkaW5nJyksXHJcblx0XHRtZW51X3RpbWVvdXQ6JycsXHJcblx0XHRpa25vd190aW1lb3V0OicnLFxyXG5cdFx0b3JnX3N0cmVldDogMTc5LFxyXG5cdFx0c3RyZWV0X2FscGhhOiAwLFxyXG5cdFx0c3RyZWV0X2N0cmw6IHRydWUsXHJcblx0XHRzdHJlZXRfZGVnOjAsXHJcblx0XHRub3dfZXZlbnQ6MFxyXG5cdH07XHJcblx0JCgnLnN0cmVldCcpLmNsb25lKCkuYXBwZW5kVG8oJy5zdHJlZXRfYWxsX2luJyk7XHJcblxyXG5cdC8vY3JlYXRlanNcclxuXHRvLmV2ZW50X2JveF9iZyA9IHtcclxuXHRcdGltYWdlczogW1wiaW1hZ2VzL2V2ZW50X2JveF9iZy5wbmdcIl0sXHJcblx0XHRmcmFtZXM6IHt3aWR0aDo3NTAsIGhlaWdodDoyNjB9LFxyXG5cdFx0YW5pbWF0aW9uczoge1xyXG5cdFx0XHRzdGFuZDowLFxyXG5cdFx0XHRzaG93OntcclxuXHRcdFx0XHRcdGZyYW1lczogWzAsOCwxLDksMiwxMCwzLDExLDQsMTIsNSwxMyw2LDE0LDddLFxyXG5cdFx0XHRcdFx0c3BlZWQ6IDFcclxuXHRcdFx0fSxcclxuXHRcdFx0YmFja3Nob3c6e1xyXG5cdFx0XHRcdFx0ZnJhbWVzOiBbNywxNCw2LDEzLDUsMTIsNCwxMSwzLDEwLDIsOSwxLDgsMF0sXHJcblx0XHRcdFx0XHRzcGVlZDogMVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fTtcclxuXHRvLmV2ZW50X2JveF9iZ19zcHJpdGVTaGVldCA9IG5ldyBjcmVhdGVqcy5TcHJpdGVTaGVldChvLmV2ZW50X2JveF9iZyk7XHJcblx0by5ldmVudF9ib3hfYmdfY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJldmVudF9ib3hfYmdcIik7XHJcblx0by5ldmVudF9ib3hfYmdfc3RhZ2UgPSBuZXcgY3JlYXRlanMuU3RhZ2Uoby5ldmVudF9ib3hfYmdfY2FudmFzKTtcclxuXHRjcmVhdGVqcy5UaWNrZXIuc2V0RlBTKDMwKTtcclxuXHRjcmVhdGVqcy5UaWNrZXIuYWRkRXZlbnRMaXN0ZW5lcihcInRpY2tcIiwgU3RhZ2VMaXN0ZW50ZXIpO1xyXG5cclxuXHRpbWFnZXMgPSBpbWFnZXN8fHt9O1xyXG5cdHNzID0gc3N8fHt9O1xyXG5cclxuXHR2YXIgbG9hZGVyID0gbmV3IGNyZWF0ZWpzLkxvYWRRdWV1ZShmYWxzZSk7XHJcblx0bG9hZGVyLmFkZEV2ZW50TGlzdGVuZXIoXCJmaWxlbG9hZFwiLCBoYW5kbGVGaWxlTG9hZCk7XHJcblx0bG9hZGVyLmFkZEV2ZW50TGlzdGVuZXIoXCJjb21wbGV0ZVwiLCBoYW5kbGVDb21wbGV0ZSk7XHJcblx0bG9hZGVyLmxvYWRGaWxlKHtzcmM6XCJpbWFnZXMvZXZlbnRfcG9wdXBfYXRsYXNfLmpzb25cIiwgdHlwZTpcInNwcml0ZXNoZWV0XCIsIGlkOlwiZXZlbnRfcG9wdXBfYXRsYXNfXCJ9LCB0cnVlKTtcclxuXHRsb2FkZXIubG9hZE1hbmlmZXN0KGxpYi5wcm9wZXJ0aWVzLm1hbmlmZXN0KTtcclxuXHRcclxuXHRmdW5jdGlvbiBoYW5kbGVGaWxlTG9hZChldnQpIHtcclxuXHRcdGlmIChldnQuaXRlbS50eXBlID09IFwiaW1hZ2VcIikgeyBpbWFnZXNbZXZ0Lml0ZW0uaWRdID0gZXZ0LnJlc3VsdDsgfVxyXG5cdH1cclxuXHJcblx0ZnVuY3Rpb24gaGFuZGxlQ29tcGxldGUoZXZ0KSB7XHJcblx0XHR2YXIgcXVldWUgPSBldnQudGFyZ2V0O1xyXG5cdFx0c3NbXCJldmVudF9wb3B1cF9hdGxhc19cIl0gPSBxdWV1ZS5nZXRSZXN1bHQoXCJldmVudF9wb3B1cF9hdGxhc19cIik7XHJcblx0XHRcclxuXHRcdG8uZXZlbnRfcG9wdXBfMl9zdGFnZSA9IG5ldyBjcmVhdGVqcy5TdGFnZShkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImV2ZW50X3BvcHVwXzJfYW5pXCIpKTtcclxuXHRcdG8uZXZlbnRfcG9wdXBfMl9hbmkgPSBvLmV2ZW50X3BvcHVwXzJfc3RhZ2UuYWRkQ2hpbGQobmV3IGxpYi5ldmVudDAyKCkpO1xyXG5cdFx0by5ldmVudF9wb3B1cF8yX2FuaS5zZXRUcmFuc2Zvcm0oMzc1LDY2NykuZ290b0FuZFN0b3AoMCk7XHJcblx0XHRvLmV2ZW50X3BvcHVwXzJfc3RhZ2UudXBkYXRlKCk7XHJcblx0fVxyXG5cclxuXHQvL0FkZExpc3RlbmVyXHJcblx0JCgnLmV2ZW50X3BvcHVwIC5jbG9zZWJ0bicpLmNsaWNrKGZ1bmN0aW9uKCl7IHNob3dfcG9wKGZhbHNlKTsgfSlcclxuXHQkKCcuZXZlbnRfcG9wdXBfMV92aWRlb2J0bicpLmNsaWNrKCBwbGF5dmlkZW8gKTtcclxuXHQkKCcuc3RyZWV0X2FsbCcpLmVhY2goc3RyZWV0X2FsbCk7XHJcblx0JCgnLmlrbm93X2J0bicpLm9uKCdjbGljaycsaWtub3dfY2xpY2spO1xyXG5cdCQoJy5tZW51YnRuJykuY2xpY2sobWVudWJ0bl9jbGljayk7XHJcblx0JCh3aW5kb3cpLmxvYWQod2luZG93X2xvYWQpO1xyXG5cdGZ1bmN0aW9uIHdpbmRvd19sb2FkKCl7XHJcblx0XHRvLmxvYWRpbmcuZmFkZU91dCgpO1xyXG5cdFx0by5zdHJlZXRfd2lkdGggPSAkKCcuc3RyZWV0JykuZXEoMCkud2lkdGgoKTtcclxuXHRcdCQoJy5zdHJlZXQnKS5lcSgxKS5jc3MoJ2xlZnQnLG8uc3RyZWV0X3dpZHRoKTtcclxuXHRcdCQoJy5zdHJlZXRfYWxsJykuY3NzKCdtYXJnaW4tbGVmdCcsby5zdHJlZXRfd2lkdGgqLTEpO1xyXG5cdFx0by5pa25vd190aW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbigpeyBpa25vd19jbGljaygpOyB9LDUzMDApO1xyXG5cdFx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2RldmljZW9yaWVudGF0aW9uJywgZnVuY3Rpb24oZSl7XHJcblx0XHRcdHdpbmRvd19kZXZpY2VvcmllbnRhdGlvbihlKTtcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0Ly9FdmVudFxyXG5cdGZ1bmN0aW9uIFN0YWdlTGlzdGVudGVyKCl7XHJcblx0XHRpZihvLnN0cmVldF9kZWcgPj0gLTYyICYmIG8uc3RyZWV0X2RlZyA8PSAtNDIpIHBsYXlfZXZlbnRfYm94KHRydWUsMSk7XHJcblx0XHRlbHNlIGlmKG8uc3RyZWV0X2RlZyA+PSAtMTIwICYmIG8uc3RyZWV0X2RlZyA8PSAtMTAwKSBwbGF5X2V2ZW50X2JveCh0cnVlLDIpO1xyXG5cdFx0ZWxzZSBpZihvLnN0cmVldF9kZWcgPj0gLTE4MCAmJiBvLnN0cmVldF9kZWcgPD0gLTE3MCkgcGxheV9ldmVudF9ib3godHJ1ZSwzKTtcclxuXHRcdGVsc2UgaWYoby5zdHJlZXRfZGVnID49IDE3MCAmJiBvLnN0cmVldF9kZWcgPD0gMTgwKSBwbGF5X2V2ZW50X2JveCh0cnVlLDMpO1xyXG5cdFx0ZWxzZSBpZihvLnN0cmVldF9kZWcgPj0gLTIxOCAmJiBvLnN0cmVldF9kZWcgPD0gLTE5OCkgcGxheV9ldmVudF9ib3godHJ1ZSw0KTtcclxuXHRcdGVsc2UgaWYoby5zdHJlZXRfZGVnID49IDE0MCAmJiBvLnN0cmVldF9kZWcgPD0gMTYwKSBwbGF5X2V2ZW50X2JveCh0cnVlLDQpO1xyXG5cdFx0ZWxzZSBpZihvLnN0cmVldF9kZWcgPj0gLTI5NyAmJiBvLnN0cmVldF9kZWcgPD0gLTI3NykgcGxheV9ldmVudF9ib3godHJ1ZSw1KTtcclxuXHRcdGVsc2UgaWYoby5zdHJlZXRfZGVnID49IDYwICYmIG8uc3RyZWV0X2RlZyA8PSA4MCkgcGxheV9ldmVudF9ib3godHJ1ZSw1KTtcclxuXHRcdGVsc2UgcGxheV9ldmVudF9ib3goZmFsc2UpO1xyXG5cclxuXHRcdG8uZXZlbnRfYm94X2JnX3N0YWdlLnVwZGF0ZSgpO1xyXG5cdFx0aWYoby5ldmVudF9wb3B1cF8yX3N0YWdlKSBvLmV2ZW50X3BvcHVwXzJfc3RhZ2UudXBkYXRlKCk7XHJcblx0fVxyXG5cdGZ1bmN0aW9uIHBsYXl2aWRlbygpe1xyXG5cdFx0JCgnLmV2ZW50X3BvcHVwXzFfdmlkZW9idG4nKS5mYWRlT3V0KCk7XHJcblx0XHQkKCcjZXZlbnRfcG9wdXBfMV92aWRlbycpWzBdLnBsYXkoKTtcclxuXHR9XHJcblx0ZnVuY3Rpb24gc2hvd19wb3AoX3QsX24pe1xyXG5cdFx0aWYoX3Qpe1xyXG5cdFx0XHQkKCcuZXZlbnRfcG9wdXAgLnBvcHVwJykuZXEoX24pLnNob3coKTtcclxuXHRcdFx0JCgnLmV2ZW50X3BvcHVwJykuZmFkZUluKDMwMCxmdW5jdGlvbigpeyAkKCcuZXZlbnRfcG9wdXAgLnBvcHVwJykuZXEoX24pLmFkZENsYXNzKCdvbicpOyB9KTtcclxuXHRcdH1lbHNlICQoJy5ldmVudF9wb3B1cCcpLmZhZGVPdXQoKTtcclxuXHR9XHJcblx0ZnVuY3Rpb24gcGxheV9ldmVudF9ib3goX3QsX24pe1xyXG5cdFx0aWYoX3Qpe1xyXG5cdFx0XHRpZihvLm5vd19ldmVudCA9PSBfbikgcmV0dXJuO1xyXG5cdFx0XHRlbHNlIG8ubm93X2V2ZW50ID0gX247XHJcblx0XHRcdCBvLmV2ZW50X2JveF9iZ19zdGFnZS5yZW1vdmVBbGxDaGlsZHJlbigpO1xyXG5cdFx0XHRvLmV2ZW50X2JveF9iZ19tYyA9IG8uZXZlbnRfYm94X2JnX3N0YWdlLmFkZENoaWxkKG5ldyBjcmVhdGVqcy5TcHJpdGUoby5ldmVudF9ib3hfYmdfc3ByaXRlU2hlZXQsIFwic2hvd1wiKSk7XHJcblx0XHRcdG8uZXZlbnRfYm94X2JnX21jLmFkZEV2ZW50TGlzdGVuZXIoXCJhbmltYXRpb25lbmRcIiwgZXZlbnRfYm94X2JnX2NvbXBsZXRlKTtcclxuXHRcdFx0JCgnLmV2ZW50X2JveCcpLmFkZENsYXNzKCdvbicpO1xyXG5cdFx0XHQkKCcuZXZlbnRfYm94JykuZmluZCgnc3BhbicpLnJlbW92ZUNsYXNzKCdvbicpLmVxKF9uKS5hZGRDbGFzcygnb24nKTtcclxuXHRcdFx0JCgnLmV2ZW50X2xpbmUnKS5maW5kKCcuaWNvbicpLnJlbW92ZUNsYXNzKCdvbicpLmVxKCBfbiAtIDEpLmFkZENsYXNzKCdvbicpO1xyXG5cdFx0fWVsc2V7XHJcblx0XHRcdGlmKG8ubm93X2V2ZW50ID09IDApIHJldHVybjtcclxuXHRcdFx0ZWxzZSBvLm5vd19ldmVudCA9IDA7XHJcblx0XHRcdG8uZXZlbnRfYm94X2JnX3N0YWdlLnJlbW92ZUFsbENoaWxkcmVuKCk7XHJcblx0XHRcdG8uZXZlbnRfYm94X2JnX21jID0gby5ldmVudF9ib3hfYmdfc3RhZ2UuYWRkQ2hpbGQobmV3IGNyZWF0ZWpzLlNwcml0ZShvLmV2ZW50X2JveF9iZ19zcHJpdGVTaGVldCwgXCJiYWNrc2hvd1wiKSk7XHJcblx0XHRcdG8uZXZlbnRfYm94X2JnX21jLmFkZEV2ZW50TGlzdGVuZXIoXCJhbmltYXRpb25lbmRcIiwgZXZlbnRfYm94X2JnX2NvbXBsZXRlKTtcclxuXHRcdFx0JCgnLmV2ZW50X2JveCcpLnJlbW92ZUNsYXNzKCdvbicpO1xyXG5cdFx0XHQkKCcuZXZlbnRfYm94JykuZmluZCgnc3BhbicpLnJlbW92ZUNsYXNzKCdvbicpO1xyXG5cdFx0XHQkKCcuZXZlbnRfbGluZScpLmZpbmQoJy5pY29uJykucmVtb3ZlQ2xhc3MoJ29uJylcclxuXHRcdH1cclxuXHR9XHJcblx0ZnVuY3Rpb24gZXZlbnRfYm94X2JnX2NvbXBsZXRlKCl7XHJcblx0XHRvLmV2ZW50X2JveF9iZ19tYy5zdG9wKCk7XHJcblx0fVxyXG5cdGZ1bmN0aW9uIHN0cmVldF9hbGwoKXtcclxuXHRcdHZhciBfdGhpcyA9ICQodGhpcyksXHJcblx0XHRcdG9nX2xlZnQgPSAwLFxyXG5cdFx0XHRkcmFnX2xlZnQgPSAwLFxyXG5cdFx0XHR0bXBfb3JnX3N0cmVldDtcclxuXHJcblx0XHRfdGhpcy5vbigndG91Y2hzdGFydCcsIGZ1bmN0aW9uKGUpe1xyXG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdGlmKGRldmljZS5tb2JpbGUoKSl7ZSA9IGUub3JpZ2luYWxFdmVudC50b3VjaGVzWzBdO31cclxuXHRcdFx0b2dfbGVmdCA9IGUucGFnZVg7XHJcblx0XHRcdF90aGlzLmFkZENsYXNzKCdtb3ZlJyk7XHJcblx0XHRcdG8uc3RyZWV0X2N0cmwgPSBmYWxzZTtcclxuXHRcdFx0dG1wX29yZ19zdHJlZXQgPSBvLm9yZ19zdHJlZXQ7XHJcblx0XHRcdF90aGlzLmJpbmQoJ3RvdWNobW92ZScsIF90b3VjaG1vdmUpO1xyXG5cdFx0fSk7XHJcblx0XHRfdGhpcy5vbigndG91Y2hlbmQnLCBmdW5jdGlvbigpe1xyXG5cdFx0XHRfdGhpcy5yZW1vdmVDbGFzcygnbW92ZScpO1xyXG5cdFx0XHRvLnN0cmVldF9jdHJsID0gdHJ1ZTtcclxuXHRcdFx0X3RoaXMudW5iaW5kKCd0b3VjaG1vdmUnLCBfdG91Y2htb3ZlKTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdGZ1bmN0aW9uIF90b3VjaG1vdmUoZSl7XHJcblx0XHRcdGlmKGRldmljZS5tb2JpbGUoKSl7ZSA9IGUub3JpZ2luYWxFdmVudC50b3VjaGVzWzBdO31cclxuICAgICAgICAgICAgZHJhZ19sZWZ0ID0gZS5wYWdlWCAtIG9nX2xlZnQ7XHJcblx0XHRcdG8ub3JnX3N0cmVldCA9IHRtcF9vcmdfc3RyZWV0IC0gZHJhZ19sZWZ0IC8gJCh3aW5kb3cpLndpZHRoKCkgKiAxMjA7XHJcblx0XHRcdGlmKG8ub3JnX3N0cmVldCA8IDApIG8ub3JnX3N0cmVldCA9IG8ub3JnX3N0cmVldCArIDM2MDtcclxuXHRcdFx0ZWxzZSBpZihvLm9yZ19zdHJlZXQgPiAzNjApIG8ub3JnX3N0cmVldCA9IG8ub3JnX3N0cmVldCAtMzYwO1xyXG5cdFx0XHRzdHJlZXRfbW92ZSgpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRmdW5jdGlvbiBpa25vd19jbGljaygpe1xyXG5cdFx0Y2xlYXJUaW1lb3V0KG8uaWtub3dfdGltZW91dCk7XHJcblx0XHQkKCcudGlwX2JveCcpLmZhZGVPdXQoKTtcclxuXHR9XHJcblx0ZnVuY3Rpb24gbWVudWJ0bl9jbGljaygpe1xyXG5cdFx0aWYoJCh0aGlzKS5oYXNDbGFzcygnb24nKSl7XHJcblx0XHRcdCQoJy5tZW51RG9tJykucmVtb3ZlQ2xhc3MoJ29uJyk7XHJcblx0XHRcdCQoJy5tZW51JykuYWRkQ2xhc3MoJ29mZicpLnJlbW92ZUNsYXNzKCdvbicpO1xyXG5cdFx0XHRvLm1lbnVfdGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0by5zdHJlZXRfY3RybCA9IHRydWU7XHJcblx0XHRcdFx0JCgnLm1lbnUnKS5yZW1vdmVDbGFzcygnb2ZmJyk7XHJcblx0XHRcdH0sIDEwMDApO1xyXG5cdFx0fVxyXG5cdFx0ZWxzZXtcclxuXHRcdFx0by5zdHJlZXRfY3RybCA9IGZhbHNlO1xyXG5cdFx0XHQkKCcubWVudURvbScpLmFkZENsYXNzKCdvbicpO1xyXG5cdFx0XHRjbGVhclRpbWVvdXQoby5tZW51X3RpbWVvdXQpO1xyXG5cdFx0XHQkKCcubWVudScpLnJlbW92ZUNsYXNzKCdvZmYnKS5hZGRDbGFzcygnb24nKTtcclxuXHRcdH1cclxuXHR9XHJcblx0ZnVuY3Rpb24gd2luZG93X2RldmljZW9yaWVudGF0aW9uKGUpIHtcclxuXHRcdG8uc3RyZWV0X2FscGhhID0gZS5hbHBoYTtcclxuXHRcdGlmKG8uc3RyZWV0X2N0cmwpIHN0cmVldF9tb3ZlKCk7XHJcblx0fVxyXG5cdGZ1bmN0aW9uIHN0cmVldF9tb3ZlKCl7XHJcblx0XHRvLnN0cmVldF93aWR0aCA9ICQoJy5zdHJlZXQnKS5lcSgwKS53aWR0aCgpO1xyXG5cdFx0JCgnLnN0cmVldCcpLmVxKDEpLmNzcygnbGVmdCcsby5zdHJlZXRfd2lkdGgpO1xyXG5cdFx0JCgnLnN0cmVldF9hbGwnKS5jc3MoJ21hcmdpbi1sZWZ0JyxvLnN0cmVldF93aWR0aCotMSk7XHJcblx0XHRvLnN0cmVldF9kZWcgPSBNYXRoLmZsb29yKCBvLnN0cmVldF9hbHBoYSAtIG8ub3JnX3N0cmVldCk7XHJcblx0XHQvLyAkKCcucG9wJykuaHRtbChvLnN0cmVldF9kZWcpO1xyXG5cdFx0dmFyIGRpcyA9IE1hdGguZmxvb3Ioby5zdHJlZXRfd2lkdGggLyAzNjAgKiBvLnN0cmVldF9kZWcgKyAkKHdpbmRvdykud2lkdGgoKSk7XHJcblx0XHQkKCcuc3RyZWV0X2FsbCcpLmNzcygnbGVmdCcsZGlzKTtcclxuXHR9XHJcblx0XHJcbn0pLy9yZWFkeSBlbmQgIFxyXG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
