$(document).ready(function(){function e(){d.loading.fadeOut(),d.street_width=$(".street").eq(0).width(),$(".street").eq(1).css("left",d.street_width),$(".street_all").css("margin-left",d.street_width*-1),d.iknow_timeout=setTimeout(function(){r()},5300),window.addEventListener("deviceorientation",function(e){i(e)})}function t(e,t){if(e){if(d.now_event==t)return;d.now_event=t,d.event_box_bg_stage.removeAllChildren(),d.event_box_bg_mc=d.event_box_bg_stage.addChild(new createjs.Sprite(d.event_box_bg_spriteSheet,"show")),d.event_box_bg_mc.addEventListener("animationend",n),$(".evnet_box").addClass("on"),$(".evnet_box").find("span").removeClass("on").eq(t).addClass("on"),$(".event_line").find(".icon").removeClass("on").eq(t-1).addClass("on")}else{if(0==d.now_event)return;d.now_event=0,d.event_box_bg_stage.removeAllChildren(),d.event_box_bg_mc=d.event_box_bg_stage.addChild(new createjs.Sprite(d.event_box_bg_spriteSheet,"backshow")),d.event_box_bg_mc.addEventListener("animationend",n),$(".evnet_box").removeClass("on"),$(".evnet_box").find("span").removeClass("on"),$(".event_line").find(".icon").removeClass("on")}}function n(){d.event_box_bg_mc.stop()}function s(){d.street_deg>=-62&&d.street_deg<=-42?t(!0,1):d.street_deg>=-120&&d.street_deg<=-100?t(!0,2):d.street_deg>=-180&&d.street_deg<=-170?t(!0,3):d.street_deg>=170&&d.street_deg<=180?t(!0,3):d.street_deg>=-218&&d.street_deg<=-198?t(!0,4):d.street_deg>=140&&d.street_deg<=160?t(!0,4):d.street_deg>=-297&&d.street_deg<=-277?t(!0,5):d.street_deg>=60&&d.street_deg<=80?t(!0,5):t(!1),d.event_box_bg_stage.update()}function o(){function e(e){device.mobile()&&(e=e.originalEvent.touches[0]),o=e.pageX-s,d.org_street=t-o/$(window).width()*120,d.org_street<0?d.org_street=d.org_street+360:d.org_street>360&&(d.org_street=d.org_street-360),a()}var t,n=$(this),s=0,o=0;n.on("touchstart",function(o){o.preventDefault(),device.mobile()&&(o=o.originalEvent.touches[0]),s=o.pageX,n.addClass("move"),d.street_ctrl=!1,t=d.org_street,n.bind("touchmove",e)}),n.on("touchend",function(){n.removeClass("move"),d.street_ctrl=!0,n.unbind("touchmove",e)})}function r(){clearTimeout(d.iknow_timeout),$(".tip_box").fadeOut()}function _(){$(this).hasClass("on")?($(".menuDom").removeClass("on"),$(".menu").addClass("off").removeClass("on"),d.menu_timeout=setTimeout(function(){d.street_ctrl=!0,$(".menu").removeClass("off")},1e3)):(d.street_ctrl=!1,$(".menuDom").addClass("on"),clearTimeout(d.menu_timeout),$(".menu").removeClass("off").addClass("on"))}function i(e){d.street_alpha=e.alpha,d.street_ctrl&&a()}function a(){d.street_width=$(".street").eq(0).width(),$(".street").eq(1).css("left",d.street_width),$(".street_all").css("margin-left",d.street_width*-1),d.street_deg=Math.floor(d.street_alpha-d.org_street);var e=Math.floor(d.street_width/360*d.street_deg+$(window).width());$(".street_all").css("left",e)}var d={wrp:$(".wrapper"),loading:$(".loading"),menu_timeout:"",iknow_timeout:"",org_street:179,street_alpha:0,street_ctrl:!0,street_deg:0,now_event:0};$(".street").clone().appendTo(".street_all_in"),d.event_box_bg={images:["images/event_box_bg.png"],frames:{width:750,height:260},animations:{stand:0,show:{frames:[0,8,1,9,2,10,3,11,4,12,5,13,6,14,7],speed:1},backshow:{frames:[7,14,6,13,5,12,4,11,3,10,2,9,1,8,0],speed:1}}},d.event_box_bg_spriteSheet=new createjs.SpriteSheet(d.event_box_bg),d.event_box_bg_canvas=document.getElementById("evnet_box_bg"),d.event_box_bg_stage=new createjs.Stage(d.event_box_bg_canvas),createjs.Ticker.setFPS(30),createjs.Ticker.addEventListener("tick",s),$(".street_all").each(o),$(".iknow_btn").on("click",r),$(".menubtn").click(_),$(window).load(e)});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbW1vbi5qcyJdLCJuYW1lcyI6WyIkIiwiZG9jdW1lbnQiLCJyZWFkeSIsIndpbmRvd19sb2FkIiwibyIsImxvYWRpbmciLCJmYWRlT3V0Iiwic3RyZWV0X3dpZHRoIiwiZXEiLCJ3aWR0aCIsImNzcyIsImlrbm93X3RpbWVvdXQiLCJzZXRUaW1lb3V0IiwiaWtub3dfY2xpY2siLCJ3aW5kb3ciLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsIndpbmRvd19kZXZpY2VvcmllbnRhdGlvbiIsInBsYXlfZXZlbnRfYm94IiwiX3QiLCJfbiIsIm5vd19ldmVudCIsImV2ZW50X2JveF9iZ19zdGFnZSIsInJlbW92ZUFsbENoaWxkcmVuIiwiZXZlbnRfYm94X2JnX21jIiwiYWRkQ2hpbGQiLCJjcmVhdGVqcyIsIlNwcml0ZSIsImV2ZW50X2JveF9iZ19zcHJpdGVTaGVldCIsImV2ZW50X2JveF9iZ19jb21wbGV0ZSIsImFkZENsYXNzIiwiZmluZCIsInJlbW92ZUNsYXNzIiwic3RvcCIsIlN0YWdlTGlzdGVudGVyIiwic3RyZWV0X2RlZyIsInVwZGF0ZSIsInN0cmVldF9hbGwiLCJfdG91Y2htb3ZlIiwiZGV2aWNlIiwibW9iaWxlIiwib3JpZ2luYWxFdmVudCIsInRvdWNoZXMiLCJkcmFnX2xlZnQiLCJwYWdlWCIsIm9nX2xlZnQiLCJvcmdfc3RyZWV0IiwidG1wX29yZ19zdHJlZXQiLCJzdHJlZXRfbW92ZSIsIl90aGlzIiwidGhpcyIsIm9uIiwicHJldmVudERlZmF1bHQiLCJzdHJlZXRfY3RybCIsImJpbmQiLCJ1bmJpbmQiLCJjbGVhclRpbWVvdXQiLCJtZW51YnRuX2NsaWNrIiwiaGFzQ2xhc3MiLCJtZW51X3RpbWVvdXQiLCJzdHJlZXRfYWxwaGEiLCJhbHBoYSIsIk1hdGgiLCJmbG9vciIsImRpcyIsIndycCIsImNsb25lIiwiYXBwZW5kVG8iLCJldmVudF9ib3hfYmciLCJpbWFnZXMiLCJmcmFtZXMiLCJoZWlnaHQiLCJhbmltYXRpb25zIiwic3RhbmQiLCJzaG93Iiwic3BlZWQiLCJiYWNrc2hvdyIsIlNwcml0ZVNoZWV0IiwiZXZlbnRfYm94X2JnX2NhbnZhcyIsImdldEVsZW1lbnRCeUlkIiwiU3RhZ2UiLCJUaWNrZXIiLCJzZXRGUFMiLCJlYWNoIiwiY2xpY2siLCJsb2FkIl0sIm1hcHBpbmdzIjoiQUFBQUEsRUFBRUMsVUFBVUMsTUFBTSxXQXdDakIsUUFBU0MsS0FDUkMsRUFBRUMsUUFBUUMsVUFDVkYsRUFBRUcsYUFBZVAsRUFBRSxXQUFXUSxHQUFHLEdBQUdDLFFBQ3BDVCxFQUFFLFdBQVdRLEdBQUcsR0FBR0UsSUFBSSxPQUFPTixFQUFFRyxjQUNoQ1AsRUFBRSxlQUFlVSxJQUFJLGNBQWNOLEVBQUVHLGlCQUNyQ0gsRUFBRU8sY0FBZ0JDLFdBQVcsV0FBWUMsS0FBaUIsTUFDMURDLE9BQU9DLGlCQUFpQixvQkFBcUIsU0FBU0MsR0FDckRDLEVBQXlCRCxLQUszQixRQUFTRSxHQUFlQyxFQUFHQyxHQUMxQixHQUFHRCxFQUFHLENBQ0wsR0FBR2YsRUFBRWlCLFdBQWFELEVBQUksTUFDakJoQixHQUFFaUIsVUFBWUQsRUFDbEJoQixFQUFFa0IsbUJBQW1CQyxvQkFDdEJuQixFQUFFb0IsZ0JBQWtCcEIsRUFBRWtCLG1CQUFtQkcsU0FBUyxHQUFJQyxVQUFTQyxPQUFPdkIsRUFBRXdCLHlCQUEwQixTQUNsR3hCLEVBQUVvQixnQkFBZ0JULGlCQUFpQixlQUFnQmMsR0FDbkQ3QixFQUFFLGNBQWM4QixTQUFTLE1BQ3pCOUIsRUFBRSxjQUFjK0IsS0FBSyxRQUFRQyxZQUFZLE1BQU14QixHQUFHWSxHQUFJVSxTQUFTLE1BQy9EOUIsRUFBRSxlQUFlK0IsS0FBSyxTQUFTQyxZQUFZLE1BQU14QixHQUFJWSxFQUFLLEdBQUdVLFNBQVMsVUFDbEUsQ0FDSixHQUFrQixHQUFmMUIsRUFBRWlCLFVBQWdCLE1BQ2hCakIsR0FBRWlCLFVBQVksRUFDbkJqQixFQUFFa0IsbUJBQW1CQyxvQkFDckJuQixFQUFFb0IsZ0JBQWtCcEIsRUFBRWtCLG1CQUFtQkcs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bGUiOiJjb21tb24uanMiLCJzb3VyY2VzQ29udGVudCI6WyIkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpe1xyXG5cdC8vSW5pdFxyXG5cdHZhciBvID17XHJcblx0XHR3cnA6ICQoJy53cmFwcGVyJyksXHJcblx0XHRsb2FkaW5nOiAkKCcubG9hZGluZycpLFxyXG5cdFx0bWVudV90aW1lb3V0OicnLFxyXG5cdFx0aWtub3dfdGltZW91dDonJyxcclxuXHRcdG9yZ19zdHJlZXQ6IDE3OSxcclxuXHRcdHN0cmVldF9hbHBoYTogMCxcclxuXHRcdHN0cmVldF9jdHJsOiB0cnVlLFxyXG5cdFx0c3RyZWV0X2RlZzowLFxyXG5cdFx0bm93X2V2ZW50OjBcclxuXHR9O1xyXG5cdCQoJy5zdHJlZXQnKS5jbG9uZSgpLmFwcGVuZFRvKCcuc3RyZWV0X2FsbF9pbicpO1xyXG5cdG8uZXZlbnRfYm94X2JnID0ge1xyXG5cdFx0aW1hZ2VzOiBbXCJpbWFnZXMvZXZlbnRfYm94X2JnLnBuZ1wiXSxcclxuXHRcdGZyYW1lczoge3dpZHRoOjc1MCwgaGVpZ2h0OjI2MH0sXHJcblx0XHRhbmltYXRpb25zOiB7XHJcblx0XHRcdHN0YW5kOjAsXHJcblx0XHRcdHNob3c6e1xyXG5cdFx0XHRcdFx0ZnJhbWVzOiBbMCw4LDEsOSwyLDEwLDMsMTEsNCwxMiw1LDEzLDYsMTQsN10sXHJcblx0XHRcdFx0XHRzcGVlZDogMVxyXG5cdFx0XHR9LFxyXG5cdFx0XHRiYWNrc2hvdzp7XHJcblx0XHRcdFx0XHRmcmFtZXM6IFs3LDE0LDYsMTMsNSwxMiw0LDExLDMsMTAsMiw5LDEsOCwwXSxcclxuXHRcdFx0XHRcdHNwZWVkOiAxXHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9O1xyXG5cdG8uZXZlbnRfYm94X2JnX3Nwcml0ZVNoZWV0ID0gbmV3IGNyZWF0ZWpzLlNwcml0ZVNoZWV0KG8uZXZlbnRfYm94X2JnKTtcclxuXHRvLmV2ZW50X2JveF9iZ19jYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImV2bmV0X2JveF9iZ1wiKTtcclxuXHRvLmV2ZW50X2JveF9iZ19zdGFnZSA9IG5ldyBjcmVhdGVqcy5TdGFnZShvLmV2ZW50X2JveF9iZ19jYW52YXMpO1xyXG5cdGNyZWF0ZWpzLlRpY2tlci5zZXRGUFMoMzApO1xyXG5cdGNyZWF0ZWpzLlRpY2tlci5hZGRFdmVudExpc3RlbmVyKFwidGlja1wiLCBTdGFnZUxpc3RlbnRlcik7XHJcblxyXG5cdC8vQWRkTGlzdGVuZXJcclxuXHQkKCcuc3RyZWV0X2FsbCcpLmVhY2goc3RyZWV0X2FsbCk7XHJcblx0JCgnLmlrbm93X2J0bicpLm9uKCdjbGljaycsaWtub3dfY2xpY2spO1xyXG5cdCQoJy5tZW51YnRuJykuY2xpY2sobWVudWJ0bl9jbGljayk7XHJcblx0JCh3aW5kb3cpLmxvYWQod2luZG93X2xvYWQpO1xyXG5cdGZ1bmN0aW9uIHdpbmRvd19sb2FkKCl7XHJcblx0XHRvLmxvYWRpbmcuZmFkZU91dCgpO1xyXG5cdFx0by5zdHJlZXRfd2lkdGggPSAkKCcuc3RyZWV0JykuZXEoMCkud2lkdGgoKTtcclxuXHRcdCQoJy5zdHJlZXQnKS5lcSgxKS5jc3MoJ2xlZnQnLG8uc3RyZWV0X3dpZHRoKTtcclxuXHRcdCQoJy5zdHJlZXRfYWxsJykuY3NzKCdtYXJnaW4tbGVmdCcsby5zdHJlZXRfd2lkdGgqLTEpO1xyXG5cdFx0by5pa25vd190aW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbigpeyBpa25vd19jbGljaygpOyB9LDUzMDApO1xyXG5cdFx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2RldmljZW9yaWVudGF0aW9uJywgZnVuY3Rpb24oZSl7XHJcblx0XHRcdHdpbmRvd19kZXZpY2VvcmllbnRhdGlvbihlKTtcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0Ly9FdmVudFxyXG5cdGZ1bmN0aW9uIHBsYXlfZXZlbnRfYm94KF90LF9uKXtcclxuXHRcdGlmKF90KXtcclxuXHRcdFx0aWYoby5ub3dfZXZlbnQgPT0gX24pIHJldHVybjtcclxuXHRcdFx0ZWxzZSBvLm5vd19ldmVudCA9IF9uO1xyXG5cdFx0XHQgby5ldmVudF9ib3hfYmdfc3RhZ2UucmVtb3ZlQWxsQ2hpbGRyZW4oKTtcclxuXHRcdFx0by5ldmVudF9ib3hfYmdfbWMgPSBvLmV2ZW50X2JveF9iZ19zdGFnZS5hZGRDaGlsZChuZXcgY3JlYXRlanMuU3ByaXRlKG8uZXZlbnRfYm94X2JnX3Nwcml0ZVNoZWV0LCBcInNob3dcIikpO1xyXG5cdFx0XHRvLmV2ZW50X2JveF9iZ19tYy5hZGRFdmVudExpc3RlbmVyKFwiYW5pbWF0aW9uZW5kXCIsIGV2ZW50X2JveF9iZ19jb21wbGV0ZSk7XHJcblx0XHRcdCQoJy5ldm5ldF9ib3gnKS5hZGRDbGFzcygnb24nKTtcclxuXHRcdFx0JCgnLmV2bmV0X2JveCcpLmZpbmQoJ3NwYW4nKS5yZW1vdmVDbGFzcygnb24nKS5lcShfbikuYWRkQ2xhc3MoJ29uJyk7XHJcblx0XHRcdCQoJy5ldmVudF9saW5lJykuZmluZCgnLmljb24nKS5yZW1vdmVDbGFzcygnb24nKS5lcSggX24gLSAxKS5hZGRDbGFzcygnb24nKTtcclxuXHRcdH1lbHNle1xyXG5cdFx0XHRpZihvLm5vd19ldmVudCA9PSAwKSByZXR1cm47XHJcblx0XHRcdGVsc2Ugby5ub3dfZXZlbnQgPSAwO1xyXG5cdFx0XHRvLmV2ZW50X2JveF9iZ19zdGFnZS5yZW1vdmVBbGxDaGlsZHJlbigpO1xyXG5cdFx0XHRvLmV2ZW50X2JveF9iZ19tYyA9IG8uZXZlbnRfYm94X2JnX3N0YWdlLmFkZENoaWxkKG5ldyBjcmVhdGVqcy5TcHJpdGUoby5ldmVudF9ib3hfYmdfc3ByaXRlU2hlZXQsIFwiYmFja3Nob3dcIikpO1xyXG5cdFx0XHRvLmV2ZW50X2JveF9iZ19tYy5hZGRFdmVudExpc3RlbmVyKFwiYW5pbWF0aW9uZW5kXCIsIGV2ZW50X2JveF9iZ19jb21wbGV0ZSk7XHJcblx0XHRcdCQoJy5ldm5ldF9ib3gnKS5yZW1vdmVDbGFzcygnb24nKTtcclxuXHRcdFx0JCgnLmV2bmV0X2JveCcpLmZpbmQoJ3NwYW4nKS5yZW1vdmVDbGFzcygnb24nKTtcclxuXHRcdFx0JCgnLmV2ZW50X2xpbmUnKS5maW5kKCcuaWNvbicpLnJlbW92ZUNsYXNzKCdvbicpXHJcblx0XHR9XHJcblx0fVxyXG5cdGZ1bmN0aW9uIGV2ZW50X2JveF9iZ19jb21wbGV0ZSgpe1xyXG5cdFx0by5ldmVudF9ib3hfYmdfbWMuc3RvcCgpO1xyXG5cdH1cclxuXHRmdW5jdGlvbiBTdGFnZUxpc3RlbnRlcigpe1xyXG5cdFx0aWYoby5zdHJlZXRfZGVnID49IC02MiAmJiBvLnN0cmVldF9kZWcgPD0gLTQyKSBwbGF5X2V2ZW50X2JveCh0cnVlLDEpO1xyXG5cdFx0ZWxzZSBpZihvLnN0cmVldF9kZWcgPj0gLTEyMCAmJiBvLnN0cmVldF9kZWcgPD0gLTEwMCkgcGxheV9ldmVudF9ib3godHJ1ZSwyKTtcclxuXHRcdGVsc2UgaWYoby5zdHJlZXRfZGVnID49IC0xODAgJiYgby5zdHJlZXRfZGVnIDw9IC0xNzApIHBsYXlfZXZlbnRfYm94KHRydWUsMyk7XHJcblx0XHRlbHNlIGlmKG8uc3RyZWV0X2RlZyA+PSAxNzAgJiYgby5zdHJlZXRfZGVnIDw9IDE4MCkgcGxheV9ldmVudF9ib3godHJ1ZSwzKTtcclxuXHRcdGVsc2UgaWYoby5zdHJlZXRfZGVnID49IC0yMTggJiYgby5zdHJlZXRfZGVnIDw9IC0xOTgpIHBsYXlfZXZlbnRfYm94KHRydWUsNCk7XHJcblx0XHRlbHNlIGlmKG8uc3RyZWV0X2RlZyA+PSAxNDAgJiYgby5zdHJlZXRfZGVnIDw9IDE2MCkgcGxheV9ldmVudF9ib3godHJ1ZSw0KTtcclxuXHRcdGVsc2UgaWYoby5zdHJlZXRfZGVnID49IC0yOTcgJiYgby5zdHJlZXRfZGVnIDw9IC0yNzcpIHBsYXlfZXZlbnRfYm94KHRydWUsNSk7XHJcblx0XHRlbHNlIGlmKG8uc3RyZWV0X2RlZyA+PSA2MCAmJiBvLnN0cmVldF9kZWcgPD0gODApIHBsYXlfZXZlbnRfYm94KHRydWUsNSk7XHJcblx0XHRlbHNlIHBsYXlfZXZlbnRfYm94KGZhbHNlKTtcclxuXHJcblx0XHRvLmV2ZW50X2JveF9iZ19zdGFnZS51cGRhdGUoKTtcclxuXHR9XHJcblx0ZnVuY3Rpb24gc3RyZWV0X2FsbCgpe1xyXG5cdFx0dmFyIF90aGlzID0gJCh0aGlzKSxcclxuXHRcdFx0b2dfbGVmdCA9IDAsXHJcblx0XHRcdGRyYWdfbGVmdCA9IDAsXHJcblx0XHRcdHRtcF9vcmdfc3RyZWV0O1xyXG5cclxuXHRcdF90aGlzLm9uKCd0b3VjaHN0YXJ0JywgZnVuY3Rpb24oZSl7XHJcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0aWYoZGV2aWNlLm1vYmlsZSgpKXtlID0gZS5vcmlnaW5hbEV2ZW50LnRvdWNoZXNbMF07fVxyXG5cdFx0XHRvZ19sZWZ0ID0gZS5wYWdlWDtcclxuXHRcdFx0X3RoaXMuYWRkQ2xhc3MoJ21vdmUnKTtcclxuXHRcdFx0by5zdHJlZXRfY3RybCA9IGZhbHNlO1xyXG5cdFx0XHR0bXBfb3JnX3N0cmVldCA9IG8ub3JnX3N0cmVldDtcclxuXHRcdFx0X3RoaXMuYmluZCgndG91Y2htb3ZlJywgX3RvdWNobW92ZSk7XHJcblx0XHR9KTtcclxuXHRcdF90aGlzLm9uKCd0b3VjaGVuZCcsIGZ1bmN0aW9uKCl7XHJcblx0XHRcdF90aGlzLnJlbW92ZUNsYXNzKCdtb3ZlJyk7XHJcblx0XHRcdG8uc3RyZWV0X2N0cmwgPSB0cnVlO1xyXG5cdFx0XHRfdGhpcy51bmJpbmQoJ3RvdWNobW92ZScsIF90b3VjaG1vdmUpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0ZnVuY3Rpb24gX3RvdWNobW92ZShlKXtcclxuXHRcdFx0aWYoZGV2aWNlLm1vYmlsZSgpKXtlID0gZS5vcmlnaW5hbEV2ZW50LnRvdWNoZXNbMF07fVxyXG4gICAgICAgICAgICBkcmFnX2xlZnQgPSBlLnBhZ2VYIC0gb2dfbGVmdDtcclxuXHRcdFx0by5vcmdfc3RyZWV0ID0gdG1wX29yZ19zdHJlZXQgLSBkcmFnX2xlZnQgLyAkKHdpbmRvdykud2lkdGgoKSAqIDEyMDtcclxuXHRcdFx0aWYoby5vcmdfc3RyZWV0IDwgMCkgby5vcmdfc3RyZWV0ID0gby5vcmdfc3RyZWV0ICsgMzYwO1xyXG5cdFx0XHRlbHNlIGlmKG8ub3JnX3N0cmVldCA+IDM2MCkgby5vcmdfc3RyZWV0ID0gby5vcmdfc3RyZWV0IC0zNjA7XHJcblx0XHRcdHN0cmVldF9tb3ZlKCk7XHJcblx0XHR9XHJcblx0fVxyXG5cdGZ1bmN0aW9uIGlrbm93X2NsaWNrKCl7XHJcblx0XHRjbGVhclRpbWVvdXQoby5pa25vd190aW1lb3V0KTtcclxuXHRcdCQoJy50aXBfYm94JykuZmFkZU91dCgpO1xyXG5cdH1cclxuXHRmdW5jdGlvbiBtZW51YnRuX2NsaWNrKCl7XHJcblx0XHRpZigkKHRoaXMpLmhhc0NsYXNzKCdvbicpKXtcclxuXHRcdFx0JCgnLm1lbnVEb20nKS5yZW1vdmVDbGFzcygnb24nKTtcclxuXHRcdFx0JCgnLm1lbnUnKS5hZGRDbGFzcygnb2ZmJykucmVtb3ZlQ2xhc3MoJ29uJyk7XHJcblx0XHRcdG8ubWVudV90aW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRvLnN0cmVldF9jdHJsID0gdHJ1ZTtcclxuXHRcdFx0XHQkKCcubWVudScpLnJlbW92ZUNsYXNzKCdvZmYnKTtcclxuXHRcdFx0fSwgMTAwMCk7XHJcblx0XHR9XHJcblx0XHRlbHNle1xyXG5cdFx0XHRvLnN0cmVldF9jdHJsID0gZmFsc2U7XHJcblx0XHRcdCQoJy5tZW51RG9tJykuYWRkQ2xhc3MoJ29uJyk7XHJcblx0XHRcdGNsZWFyVGltZW91dChvLm1lbnVfdGltZW91dCk7XHJcblx0XHRcdCQoJy5tZW51JykucmVtb3ZlQ2xhc3MoJ29mZicpLmFkZENsYXNzKCdvbicpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRmdW5jdGlvbiB3aW5kb3dfZGV2aWNlb3JpZW50YXRpb24oZSkge1xyXG5cdFx0by5zdHJlZXRfYWxwaGEgPSBlLmFscGhhO1xyXG5cdFx0aWYoby5zdHJlZXRfY3RybCkgc3RyZWV0X21vdmUoKTtcclxuXHR9XHJcblx0ZnVuY3Rpb24gc3RyZWV0X21vdmUoKXtcclxuXHRcdG8uc3RyZWV0X3dpZHRoID0gJCgnLnN0cmVldCcpLmVxKDApLndpZHRoKCk7XHJcblx0XHQkKCcuc3RyZWV0JykuZXEoMSkuY3NzKCdsZWZ0JyxvLnN0cmVldF93aWR0aCk7XHJcblx0XHQkKCcuc3RyZWV0X2FsbCcpLmNzcygnbWFyZ2luLWxlZnQnLG8uc3RyZWV0X3dpZHRoKi0xKTtcclxuXHRcdG8uc3RyZWV0X2RlZyA9IE1hdGguZmxvb3IoIG8uc3RyZWV0X2FscGhhIC0gby5vcmdfc3RyZWV0KTtcclxuXHRcdC8vICQoJy5wb3AnKS5odG1sKG8uc3RyZWV0X2RlZyk7XHJcblx0XHR2YXIgZGlzID0gTWF0aC5mbG9vcihvLnN0cmVldF93aWR0aCAvIDM2MCAqIG8uc3RyZWV0X2RlZyArICQod2luZG93KS53aWR0aCgpKTtcclxuXHRcdCQoJy5zdHJlZXRfYWxsJykuY3NzKCdsZWZ0JyxkaXMpO1xyXG5cdH1cclxuXHRcclxufSkvL3JlYWR5IGVuZCAgXHJcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
