$(document).ready(function(){function e(){d.loading.fadeOut(),d.street_width=$(".street").eq(0).width(),$(".street").eq(1).css("left",d.street_width),$(".street_all").css("margin-left",d.street_width*-1),d.iknow_timeout=setTimeout(function(){r()},5300),window.addEventListener("deviceorientation",function(e){a(e)})}function t(e,t){if(e){if(d.now_event==t)return;d.now_event=t,d.event_box_bg_stage.removeAllChildren(),d.event_box_bg_mc=d.event_box_bg_stage.addChild(new createjs.Sprite(d.event_box_bg_spriteSheet,"show")),d.event_box_bg_mc.addEventListener("animationend",n),$(".evnet_box").addClass("on"),$(".evnet_box").find("span").removeClass("on").eq(t).addClass("on")}else{if(0==d.now_event)return;d.now_event=0,d.event_box_bg_stage.removeAllChildren(),d.event_box_bg_mc=d.event_box_bg_stage.addChild(new createjs.Sprite(d.event_box_bg_spriteSheet,"backshow")),d.event_box_bg_mc.addEventListener("animationend",n),$(".evnet_box").removeClass("on"),$(".evnet_box").find("span").removeClass("on")}}function n(){d.event_box_bg_mc.stop()}function o(){d.street_deg>=-62&&d.street_deg<=-42?t(!0,1):d.street_deg>=-120&&d.street_deg<=-100?t(!0,2):d.street_deg>=-190&&d.street_deg<=-170?t(!0,3):d.street_deg>=-218&&d.street_deg<=-198?t(!0,4):d.street_deg>=-297&&d.street_deg<=-277?t(!0,5):t(!1),d.event_box_bg_stage.update()}function s(){function e(e){device.mobile()&&(e=e.originalEvent.touches[0]),s=e.pageX-o,d.org_street=t-s/$(window).width()*120,d.org_street<0?d.org_street=d.org_street+360:d.org_street>360&&(d.org_street=d.org_street-360),i()}var t,n=$(this),o=0,s=0;n.on("touchstart",function(s){s.preventDefault(),device.mobile()&&(s=s.originalEvent.touches[0]),o=s.pageX,n.addClass("move"),d.street_ctrl=!1,t=d.org_street,n.bind("touchmove",e)}),n.on("touchend",function(){n.removeClass("move"),d.street_ctrl=!0,n.unbind("touchmove",e)})}function r(){clearTimeout(d.iknow_timeout),$(".tip_box").fadeOut()}function _(){$(this).hasClass("on")?($(".menuDom").removeClass("on"),$(".menu").addClass("off").removeClass("on"),d.menu_timeout=setTimeout(function(){d.street_ctrl=!0,$(".menu").removeClass("off")},1e3)):(d.street_ctrl=!1,$(".menuDom").addClass("on"),clearTimeout(d.menu_timeout),$(".menu").removeClass("off").addClass("on"))}function a(e){d.street_alpha=e.alpha,d.street_ctrl&&i()}function i(){d.street_width=$(".street").eq(0).width(),$(".street").eq(1).css("left",d.street_width),$(".street_all").css("margin-left",d.street_width*-1),d.street_deg=Math.floor(d.street_alpha-d.org_street);var e=Math.floor(d.street_width/360*d.street_deg+$(window).width());$(".street_all").css("left",e)}var d={wrp:$(".wrapper"),loading:$(".loading"),menu_timeout:"",iknow_timeout:"",org_street:179,street_alpha:0,street_ctrl:!0,street_deg:0,now_event:0};$(".street").clone().appendTo(".street_all_in"),d.event_box_bg={images:["images/event_box_bg.png"],frames:{width:750,height:260},animations:{stand:0,show:{frames:[0,8,1,9,2,10,3,11,4,12,5,13,6,14,7],speed:1},backshow:{frames:[7,14,6,13,5,12,4,11,3,10,2,9,1,8,0],speed:1}}},d.event_box_bg_spriteSheet=new createjs.SpriteSheet(d.event_box_bg),d.event_box_bg_canvas=document.getElementById("evnet_box_bg"),d.event_box_bg_stage=new createjs.Stage(d.event_box_bg_canvas),createjs.Ticker.setFPS(30),createjs.Ticker.addEventListener("tick",o),$(".street_all").each(s),$(".iknow_btn").on("click",r),$(".menubtn").click(_),$(window).load(e)});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbW1vbi5qcyJdLCJuYW1lcyI6WyIkIiwiZG9jdW1lbnQiLCJyZWFkeSIsIndpbmRvd19sb2FkIiwibyIsImxvYWRpbmciLCJmYWRlT3V0Iiwic3RyZWV0X3dpZHRoIiwiZXEiLCJ3aWR0aCIsImNzcyIsImlrbm93X3RpbWVvdXQiLCJzZXRUaW1lb3V0IiwiaWtub3dfY2xpY2siLCJ3aW5kb3ciLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsIndpbmRvd19kZXZpY2VvcmllbnRhdGlvbiIsInBsYXlfZXZlbnRfYm94IiwiX3QiLCJfbiIsIm5vd19ldmVudCIsImV2ZW50X2JveF9iZ19zdGFnZSIsInJlbW92ZUFsbENoaWxkcmVuIiwiZXZlbnRfYm94X2JnX21jIiwiYWRkQ2hpbGQiLCJjcmVhdGVqcyIsIlNwcml0ZSIsImV2ZW50X2JveF9iZ19zcHJpdGVTaGVldCIsImV2ZW50X2JveF9iZ19jb21wbGV0ZSIsImFkZENsYXNzIiwiZmluZCIsInJlbW92ZUNsYXNzIiwic3RvcCIsIlN0YWdlTGlzdGVudGVyIiwic3RyZWV0X2RlZyIsInVwZGF0ZSIsInN0cmVldF9hbGwiLCJfdG91Y2htb3ZlIiwiZGV2aWNlIiwibW9iaWxlIiwib3JpZ2luYWxFdmVudCIsInRvdWNoZXMiLCJkcmFnX2xlZnQiLCJwYWdlWCIsIm9nX2xlZnQiLCJvcmdfc3RyZWV0IiwidG1wX29yZ19zdHJlZXQiLCJzdHJlZXRfbW92ZSIsIl90aGlzIiwidGhpcyIsIm9uIiwicHJldmVudERlZmF1bHQiLCJzdHJlZXRfY3RybCIsImJpbmQiLCJ1bmJpbmQiLCJjbGVhclRpbWVvdXQiLCJtZW51YnRuX2NsaWNrIiwiaGFzQ2xhc3MiLCJtZW51X3RpbWVvdXQiLCJzdHJlZXRfYWxwaGEiLCJhbHBoYSIsIk1hdGgiLCJmbG9vciIsImRpcyIsIndycCIsImNsb25lIiwiYXBwZW5kVG8iLCJldmVudF9ib3hfYmciLCJpbWFnZXMiLCJmcmFtZXMiLCJoZWlnaHQiLCJhbmltYXRpb25zIiwic3RhbmQiLCJzaG93Iiwic3BlZWQiLCJiYWNrc2hvdyIsIlNwcml0ZVNoZWV0IiwiZXZlbnRfYm94X2JnX2NhbnZhcyIsImdldEVsZW1lbnRCeUlkIiwiU3RhZ2UiLCJUaWNrZXIiLCJzZXRGUFMiLCJlYWNoIiwiY2xpY2siLCJsb2FkIl0sIm1hcHBpbmdzIjoiQUFBQUEsRUFBRUMsVUFBVUMsTUFBTSxXQXdDakIsUUFBU0MsS0FDUkMsRUFBRUMsUUFBUUMsVUFDVkYsRUFBRUcsYUFBZVAsRUFBRSxXQUFXUSxHQUFHLEdBQUdDLFFBQ3BDVCxFQUFFLFdBQVdRLEdBQUcsR0FBR0UsSUFBSSxPQUFPTixFQUFFRyxjQUNoQ1AsRUFBRSxlQUFlVSxJQUFJLGNBQWNOLEVBQUVHLGlCQUNyQ0gsRUFBRU8sY0FBZ0JDLFdBQVcsV0FBWUMsS0FBaUIsTUFDMURDLE9BQU9DLGlCQUFpQixvQkFBcUIsU0FBU0MsR0FDckRDLEVBQXlCRCxLQUszQixRQUFTRSxHQUFlQyxFQUFHQyxHQUMxQixHQUFHRCxFQUFHLENBQ0wsR0FBR2YsRUFBRWlCLFdBQWFELEVBQUksTUFDakJoQixHQUFFaUIsVUFBWUQsRUFDbEJoQixFQUFFa0IsbUJBQW1CQyxvQkFDdEJuQixFQUFFb0IsZ0JBQWtCcEIsRUFBRWtCLG1CQUFtQkcsU0FBUyxHQUFJQyxVQUFTQyxPQUFPdkIsRUFBRXdCLHlCQUEwQixTQUNsR3hCLEVBQUVvQixnQkFBZ0JULGlCQUFpQixlQUFnQmMsR0FDbkQ3QixFQUFFLGNBQWM4QixTQUFTLE1BQ3pCOUIsRUFBRSxjQUFjK0IsS0FBSyxRQUFRQyxZQUFZLE1BQU14QixHQUFHWSxHQUFJVSxTQUFTLFVBQzNELENBQ0osR0FBa0IsR0FBZjFCLEVBQUVpQixVQUFnQixNQUNoQmpCLEdBQUVpQixVQUFZLEVBQ25CakIsRUFBRWtCLG1CQUFtQkMsb0JBQ3JCbkIsRUFBRW9CLGdCQUFrQnBCLEVBQUVrQixtQkFBbUJHLFNBQVMsR0FBSUMsVUFBU0MsT0FBT3ZCLEVBQUV3Qix5QkFBMEIsYUFDbEd4QixFQUFFb0IsZ0JBQWdCVCxpQkFB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V0FBVyxFQUNYZCxVQUFVLEVBRVhyQixHQUFFLFdBQVdrRSxRQUFRQyxTQUFTLGtCQUM5Qi9ELEVBQUVnRSxjQUNEQyxRQUFTLDJCQUNUQyxRQUFTN0QsTUFBTSxJQUFLOEQsT0FBTyxLQUMzQkMsWUFDQ0MsTUFBTSxFQUNOQyxNQUNFSixRQUFTLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxHQUMxQ0ssTUFBTyxHQUVUQyxVQUNFTixRQUFTLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxFQUFFLEVBQUUsRUFBRSxHQUMxQ0ssTUFBTyxLQUlYdkUsRUFBRXdCLHlCQUEyQixHQUFJRixVQUFTbUQsWUFBWXpFLEVBQUVnRSxjQUN4RGhFLEVBQUUwRSxvQkFBc0I3RSxTQUFTOEUsZUFBZSxnQkFDaEQzRSxFQUFFa0IsbUJBQXFCLEdBQUlJLFVBQVNzRCxNQUFNNUUsRUFBRTBFLHFCQUM1Q3BELFNBQVN1RCxPQUFPQyxPQUFPLElBQ3ZCeEQsU0FBU3VELE9BQU9sRSxpQkFBaUIsT0FBUW1CLEdBR3pDbEMsRUFBRSxlQUFlbUYsS0FBSzlDLEdBQ3RCckMsRUFBRSxjQUFjbUQsR0FBRyxRQUFRdEMsR0FDM0JiLEVBQUUsWUFBWW9GLE1BQU0zQixHQUNwQnpELEVBQUVjLFFBQVF1RSxLQUFLbEYiLCJmaWxlIjoiY29tbW9uLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKXtcclxuXHQvL0luaXRcclxuXHR2YXIgbyA9e1xyXG5cdFx0d3JwOiAkKCcud3JhcHBlcicpLFxyXG5cdFx0bG9hZGluZzogJCgnLmxvYWRpbmcnKSxcclxuXHRcdG1lbnVfdGltZW91dDonJyxcclxuXHRcdGlrbm93X3RpbWVvdXQ6JycsXHJcblx0XHRvcmdfc3RyZWV0OiAxNzksXHJcblx0XHRzdHJlZXRfYWxwaGE6IDAsXHJcblx0XHRzdHJlZXRfY3RybDogdHJ1ZSxcclxuXHRcdHN0cmVldF9kZWc6MCxcclxuXHRcdG5vd19ldmVudDowXHJcblx0fTtcclxuXHQkKCcuc3RyZWV0JykuY2xvbmUoKS5hcHBlbmRUbygnLnN0cmVldF9hbGxfaW4nKTtcclxuXHRvLmV2ZW50X2JveF9iZyA9IHtcclxuXHRcdGltYWdlczogW1wiaW1hZ2VzL2V2ZW50X2JveF9iZy5wbmdcIl0sXHJcblx0XHRmcmFtZXM6IHt3aWR0aDo3NTAsIGhlaWdodDoyNjB9LFxyXG5cdFx0YW5pbWF0aW9uczoge1xyXG5cdFx0XHRzdGFuZDowLFxyXG5cdFx0XHRzaG93OntcclxuXHRcdFx0XHRcdGZyYW1lczogWzAsOCwxLDksMiwxMCwzLDExLDQsMTIsNSwxMyw2LDE0LDddLFxyXG5cdFx0XHRcdFx0c3BlZWQ6IDFcclxuXHRcdFx0fSxcclxuXHRcdFx0YmFja3Nob3c6e1xyXG5cdFx0XHRcdFx0ZnJhbWVzOiBbNywxNCw2LDEzLDUsMTIsNCwxMSwzLDEwLDIsOSwxLDgsMF0sXHJcblx0XHRcdFx0XHRzcGVlZDogMVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fTtcclxuXHRvLmV2ZW50X2JveF9iZ19zcHJpdGVTaGVldCA9IG5ldyBjcmVhdGVqcy5TcHJpdGVTaGVldChvLmV2ZW50X2JveF9iZyk7XHJcblx0by5ldmVudF9ib3hfYmdfY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJldm5ldF9ib3hfYmdcIik7XHJcblx0by5ldmVudF9ib3hfYmdfc3RhZ2UgPSBuZXcgY3JlYXRlanMuU3RhZ2Uoby5ldmVudF9ib3hfYmdfY2FudmFzKTtcclxuXHRjcmVhdGVqcy5UaWNrZXIuc2V0RlBTKDMwKTtcclxuXHRjcmVhdGVqcy5UaWNrZXIuYWRkRXZlbnRMaXN0ZW5lcihcInRpY2tcIiwgU3RhZ2VMaXN0ZW50ZXIpO1xyXG5cclxuXHQvL0FkZExpc3RlbmVyXHJcblx0JCgnLnN0cmVldF9hbGwnKS5lYWNoKHN0cmVldF9hbGwpO1xyXG5cdCQoJy5pa25vd19idG4nKS5vbignY2xpY2snLGlrbm93X2NsaWNrKTtcclxuXHQkKCcubWVudWJ0bicpLmNsaWNrKG1lbnVidG5fY2xpY2spO1xyXG5cdCQod2luZG93KS5sb2FkKHdpbmRvd19sb2FkKTtcclxuXHRmdW5jdGlvbiB3aW5kb3dfbG9hZCgpe1xyXG5cdFx0by5sb2FkaW5nLmZhZGVPdXQoKTtcclxuXHRcdG8uc3RyZWV0X3dpZHRoID0gJCgnLnN0cmVldCcpLmVxKDApLndpZHRoKCk7XHJcblx0XHQkKCcuc3RyZWV0JykuZXEoMSkuY3NzKCdsZWZ0JyxvLnN0cmVldF93aWR0aCk7XHJcblx0XHQkKCcuc3RyZWV0X2FsbCcpLmNzcygnbWFyZ2luLWxlZnQnLG8uc3RyZWV0X3dpZHRoKi0xKTtcclxuXHRcdG8uaWtub3dfdGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKXsgaWtub3dfY2xpY2soKTsgfSw1MzAwKTtcclxuXHRcdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdkZXZpY2VvcmllbnRhdGlvbicsIGZ1bmN0aW9uKGUpe1xyXG5cdFx0XHR3aW5kb3dfZGV2aWNlb3JpZW50YXRpb24oZSk7XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdC8vRXZlbnRcclxuXHRmdW5jdGlvbiBwbGF5X2V2ZW50X2JveChfdCxfbil7XHJcblx0XHRpZihfdCl7XHJcblx0XHRcdGlmKG8ubm93X2V2ZW50ID09IF9uKSByZXR1cm47XHJcblx0XHRcdGVsc2Ugby5ub3dfZXZlbnQgPSBfbjtcclxuXHRcdFx0IG8uZXZlbnRfYm94X2JnX3N0YWdlLnJlbW92ZUFsbENoaWxkcmVuKCk7XHJcblx0XHRcdG8uZXZlbnRfYm94X2JnX21jID0gby5ldmVudF9ib3hfYmdfc3RhZ2UuYWRkQ2hpbGQobmV3IGNyZWF0ZWpzLlNwcml0ZShvLmV2ZW50X2JveF9iZ19zcHJpdGVTaGVldCwgXCJzaG93XCIpKTtcclxuXHRcdFx0by5ldmVudF9ib3hfYmdfbWMuYWRkRXZlbnRMaXN0ZW5lcihcImFuaW1hdGlvbmVuZFwiLCBldmVudF9ib3hfYmdfY29tcGxldGUpO1xyXG5cdFx0XHQkKCcuZXZuZXRfYm94JykuYWRkQ2xhc3MoJ29uJyk7XHJcblx0XHRcdCQoJy5ldm5ldF9ib3gnKS5maW5kKCdzcGFuJykucmVtb3ZlQ2xhc3MoJ29uJykuZXEoX24pLmFkZENsYXNzKCdvbicpO1xyXG5cdFx0fWVsc2V7XHJcblx0XHRcdGlmKG8ubm93X2V2ZW50ID09IDApIHJldHVybjtcclxuXHRcdFx0ZWxzZSBvLm5vd19ldmVudCA9IDA7XHJcblx0XHRcdG8uZXZlbnRfYm94X2JnX3N0YWdlLnJlbW92ZUFsbENoaWxkcmVuKCk7XHJcblx0XHRcdG8uZXZlbnRfYm94X2JnX21jID0gby5ldmVudF9ib3hfYmdfc3RhZ2UuYWRkQ2hpbGQobmV3IGNyZWF0ZWpzLlNwcml0ZShvLmV2ZW50X2JveF9iZ19zcHJpdGVTaGVldCwgXCJiYWNrc2hvd1wiKSk7XHJcblx0XHRcdG8uZXZlbnRfYm94X2JnX21jLmFkZEV2ZW50TGlzdGVuZXIoXCJhbmltYXRpb25lbmRcIiwgZXZlbnRfYm94X2JnX2NvbXBsZXRlKTtcclxuXHRcdFx0JCgnLmV2bmV0X2JveCcpLnJlbW92ZUNsYXNzKCdvbicpO1xyXG5cdFx0XHQkKCcuZXZuZXRfYm94JykuZmluZCgnc3BhbicpLnJlbW92ZUNsYXNzKCdvbicpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRmdW5jdGlvbiBldmVudF9ib3hfYmdfY29tcGxldGUoKXtcclxuXHRcdG8uZXZlbnRfYm94X2JnX21jLnN0b3AoKTtcclxuXHR9XHJcblx0ZnVuY3Rpb24gU3RhZ2VMaXN0ZW50ZXIoKXtcclxuXHRcdGlmKG8uc3RyZWV0X2RlZyA+PSAtNjIgJiYgby5zdHJlZXRfZGVnIDw9IC00MikgcGxheV9ldmVudF9ib3godHJ1ZSwxKTtcclxuXHRcdGVsc2UgaWYoby5zdHJlZXRfZGVnID49IC0xMjAgJiYgby5zdHJlZXRfZGVnIDw9IC0xMDApIHBsYXlfZXZlbnRfYm94KHRydWUsMik7XHJcblx0XHRlbHNlIGlmKG8uc3RyZWV0X2RlZyA+PSAtMTkwICYmIG8uc3RyZWV0X2RlZyA8PSAtMTcwKSBwbGF5X2V2ZW50X2JveCh0cnVlLDMpO1xyXG5cdFx0ZWxzZSBpZihvLnN0cmVldF9kZWcgPj0gLTIxOCAmJiBvLnN0cmVldF9kZWcgPD0gLTE5OCkgcGxheV9ldmVudF9ib3godHJ1ZSw0KTtcclxuXHRcdGVsc2UgaWYoby5zdHJlZXRfZGVnID49IC0yOTcgJiYgby5zdHJlZXRfZGVnIDw9IC0yNzcpIHBsYXlfZXZlbnRfYm94KHRydWUsNSk7XHJcblx0XHRlbHNlIHBsYXlfZXZlbnRfYm94KGZhbHNlKTtcclxuXHJcblx0XHRvLmV2ZW50X2JveF9iZ19zdGFnZS51cGRhdGUoKTtcclxuXHR9XHJcblx0ZnVuY3Rpb24gc3RyZWV0X2FsbCgpe1xyXG5cdFx0dmFyIF90aGlzID0gJCh0aGlzKSxcclxuXHRcdFx0b2dfbGVmdCA9IDAsXHJcblx0XHRcdGRyYWdfbGVmdCA9IDAsXHJcblx0XHRcdHRtcF9vcmdfc3RyZWV0O1xyXG5cclxuXHRcdF90aGlzLm9uKCd0b3VjaHN0YXJ0JywgZnVuY3Rpb24oZSl7XHJcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0aWYoZGV2aWNlLm1vYmlsZSgpKXtlID0gZS5vcmlnaW5hbEV2ZW50LnRvdWNoZXNbMF07fVxyXG5cdFx0XHRvZ19sZWZ0ID0gZS5wYWdlWDtcclxuXHRcdFx0X3RoaXMuYWRkQ2xhc3MoJ21vdmUnKTtcclxuXHRcdFx0by5zdHJlZXRfY3RybCA9IGZhbHNlO1xyXG5cdFx0XHR0bXBfb3JnX3N0cmVldCA9IG8ub3JnX3N0cmVldDtcclxuXHRcdFx0X3RoaXMuYmluZCgndG91Y2htb3ZlJywgX3RvdWNobW92ZSk7XHJcblx0XHR9KTtcclxuXHRcdF90aGlzLm9uKCd0b3VjaGVuZCcsIGZ1bmN0aW9uKCl7XHJcblx0XHRcdF90aGlzLnJlbW92ZUNsYXNzKCdtb3ZlJyk7XHJcblx0XHRcdG8uc3RyZWV0X2N0cmwgPSB0cnVlO1xyXG5cdFx0XHRfdGhpcy51bmJpbmQoJ3RvdWNobW92ZScsIF90b3VjaG1vdmUpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0ZnVuY3Rpb24gX3RvdWNobW92ZShlKXtcclxuXHRcdFx0aWYoZGV2aWNlLm1vYmlsZSgpKXtlID0gZS5vcmlnaW5hbEV2ZW50LnRvdWNoZXNbMF07fVxyXG4gICAgICAgICAgICBkcmFnX2xlZnQgPSBlLnBhZ2VYIC0gb2dfbGVmdDtcclxuXHRcdFx0by5vcmdfc3RyZWV0ID0gdG1wX29yZ19zdHJlZXQgLSBkcmFnX2xlZnQgLyAkKHdpbmRvdykud2lkdGgoKSAqIDEyMDtcclxuXHRcdFx0aWYoby5vcmdfc3RyZWV0IDwgMCkgby5vcmdfc3RyZWV0ID0gby5vcmdfc3RyZWV0ICsgMzYwO1xyXG5cdFx0XHRlbHNlIGlmKG8ub3JnX3N0cmVldCA+IDM2MCkgby5vcmdfc3RyZWV0ID0gby5vcmdfc3RyZWV0IC0zNjA7XHJcblx0XHRcdHN0cmVldF9tb3ZlKCk7XHJcblx0XHR9XHJcblx0fVxyXG5cdGZ1bmN0aW9uIGlrbm93X2NsaWNrKCl7XHJcblx0XHRjbGVhclRpbWVvdXQoby5pa25vd190aW1lb3V0KTtcclxuXHRcdCQoJy50aXBfYm94JykuZmFkZU91dCgpO1xyXG5cdH1cclxuXHRmdW5jdGlvbiBtZW51YnRuX2NsaWNrKCl7XHJcblx0XHRpZigkKHRoaXMpLmhhc0NsYXNzKCdvbicpKXtcclxuXHRcdFx0JCgnLm1lbnVEb20nKS5yZW1vdmVDbGFzcygnb24nKTtcclxuXHRcdFx0JCgnLm1lbnUnKS5hZGRDbGFzcygnb2ZmJykucmVtb3ZlQ2xhc3MoJ29uJyk7XHJcblx0XHRcdG8ubWVudV90aW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRvLnN0cmVldF9jdHJsID0gdHJ1ZTtcclxuXHRcdFx0XHQkKCcubWVudScpLnJlbW92ZUNsYXNzKCdvZmYnKTtcclxuXHRcdFx0fSwgMTAwMCk7XHJcblx0XHR9XHJcblx0XHRlbHNle1xyXG5cdFx0XHRvLnN0cmVldF9jdHJsID0gZmFsc2U7XHJcblx0XHRcdCQoJy5tZW51RG9tJykuYWRkQ2xhc3MoJ29uJyk7XHJcblx0XHRcdGNsZWFyVGltZW91dChvLm1lbnVfdGltZW91dCk7XHJcblx0XHRcdCQoJy5tZW51JykucmVtb3ZlQ2xhc3MoJ29mZicpLmFkZENsYXNzKCdvbicpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRmdW5jdGlvbiB3aW5kb3dfZGV2aWNlb3JpZW50YXRpb24oZSkge1xyXG5cdFx0by5zdHJlZXRfYWxwaGEgPSBlLmFscGhhO1xyXG5cdFx0aWYoby5zdHJlZXRfY3RybCkgc3RyZWV0X21vdmUoKTtcclxuXHR9XHJcblx0ZnVuY3Rpb24gc3RyZWV0X21vdmUoKXtcclxuXHRcdG8uc3RyZWV0X3dpZHRoID0gJCgnLnN0cmVldCcpLmVxKDApLndpZHRoKCk7XHJcblx0XHQkKCcuc3RyZWV0JykuZXEoMSkuY3NzKCdsZWZ0JyxvLnN0cmVldF93aWR0aCk7XHJcblx0XHQkKCcuc3RyZWV0X2FsbCcpLmNzcygnbWFyZ2luLWxlZnQnLG8uc3RyZWV0X3dpZHRoKi0xKTtcclxuXHRcdG8uc3RyZWV0X2RlZyA9IE1hdGguZmxvb3IoIG8uc3RyZWV0X2FscGhhIC0gby5vcmdfc3RyZWV0KTtcclxuXHRcdHZhciBkaXMgPSBNYXRoLmZsb29yKG8uc3RyZWV0X3dpZHRoIC8gMzYwICogby5zdHJlZXRfZGVnICsgJCh3aW5kb3cpLndpZHRoKCkpO1xyXG5cdFx0JCgnLnN0cmVldF9hbGwnKS5jc3MoJ2xlZnQnLGRpcyk7XHJcblx0fVxyXG5cdFxyXG59KS8vcmVhZHkgZW5kICBcclxuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
