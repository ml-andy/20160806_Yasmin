$(document).ready(function(){function e(){d.loading.fadeOut(),d.street_width=$(".street").eq(0).width(),$(".street").eq(1).css("left",d.street_width),$(".street_all").css("margin-left",d.street_width*-1),d.iknow_timeout=setTimeout(function(){r()},5300),window.addEventListener("deviceorientation",function(e){a(e)})}function t(e,t){if(e){if(d.now_event==t)return;d.now_event=t,d.event_box_bg_stage.removeAllChildren(),d.event_box_bg_mc=d.event_box_bg_stage.addChild(new createjs.Sprite(d.event_box_bg_spriteSheet,"show")),d.event_box_bg_mc.addEventListener("animationend",n),$(".evnet_box").addClass("on"),$(".evnet_box").find("span").removeClass("on").eq(t).addClass("on")}else{if(0==d.now_event)return;d.now_event=0,d.event_box_bg_stage.removeAllChildren(),d.event_box_bg_mc=d.event_box_bg_stage.addChild(new createjs.Sprite(d.event_box_bg_spriteSheet,"backshow")),d.event_box_bg_mc.addEventListener("animationend",n),$(".evnet_box").removeClass("on"),$(".evnet_box").find("span").removeClass("on")}}function n(){d.event_box_bg_mc.stop()}function o(){d.street_deg>=-62&&d.street_deg<=-42?t(!0,1):d.street_deg>=-120&&d.street_deg<=-100?t(!0,2):d.street_deg>=-190&&d.street_deg<=-170?t(!0,3):d.street_deg>=-218&&d.street_deg<=-198?t(!0,4):d.street_deg>=-297&&d.street_deg<=-277?t(!0,5):t(!1),d.event_box_bg_stage.update()}function s(){function e(e){device.mobile()&&(e=e.originalEvent.touches[0]),s=e.pageX-o,d.org_street=t-s/$(window).width()*120,d.org_street<0?d.org_street=d.org_street+360:d.org_street>360&&(d.org_street=d.org_street-360),i()}var t,n=$(this),o=0,s=0;n.on("touchstart",function(s){s.preventDefault(),device.mobile()&&(s=s.originalEvent.touches[0]),o=s.pageX,n.addClass("move"),d.street_ctrl=!1,t=d.org_street,n.bind("touchmove",e)}),n.on("touchend",function(){n.removeClass("move"),d.street_ctrl=!0,n.unbind("touchmove",e)})}function r(){clearTimeout(d.iknow_timeout),$(".tip_box").fadeOut()}function _(){$(this).hasClass("on")?($(".menuDom").removeClass("on"),$(".menu").addClass("off").removeClass("on"),d.menu_timeout=setTimeout(function(){d.street_ctrl=!0,$(".menu").removeClass("off")},1e3)):(d.street_ctrl=!1,$(".menuDom").addClass("on"),clearTimeout(d.menu_timeout),$(".menu").removeClass("off").addClass("on"))}function a(e){d.street_alpha=e.alpha,d.street_ctrl&&i()}function i(){d.street_width=$(".street").eq(0).width(),$(".street").eq(1).css("left",d.street_width),$(".street_all").css("margin-left",d.street_width*-1),d.street_deg=Math.floor(d.street_alpha-d.org_street),$(".pop").html(d.street_deg);var e=Math.floor(d.street_width/360*d.street_deg+$(window).width());$(".street_all").css("left",e)}var d={wrp:$(".wrapper"),loading:$(".loading"),menu_timeout:"",iknow_timeout:"",org_street:179,street_alpha:0,street_ctrl:!0,street_deg:0,now_event:0};$(".street").clone().appendTo(".street_all_in"),d.event_box_bg={images:["images/event_box_bg.png"],frames:{width:750,height:260},animations:{stand:0,show:{frames:[0,8,1,9,2,10,3,11,4,12,5,13,6,14,7],speed:1},backshow:{frames:[7,14,6,13,5,12,4,11,3,10,2,9,1,8,0],speed:1}}},d.event_box_bg_spriteSheet=new createjs.SpriteSheet(d.event_box_bg),d.event_box_bg_canvas=document.getElementById("evnet_box_bg"),d.event_box_bg_stage=new createjs.Stage(d.event_box_bg_canvas),createjs.Ticker.setFPS(30),createjs.Ticker.addEventListener("tick",o),$(".street_all").each(s),$(".iknow_btn").on("click",r),$(".menubtn").click(_),$(window).load(e)});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbW1vbi5qcyJdLCJuYW1lcyI6WyIkIiwiZG9jdW1lbnQiLCJyZWFkeSIsIndpbmRvd19sb2FkIiwibyIsImxvYWRpbmciLCJmYWRlT3V0Iiwic3RyZWV0X3dpZHRoIiwiZXEiLCJ3aWR0aCIsImNzcyIsImlrbm93X3RpbWVvdXQiLCJzZXRUaW1lb3V0IiwiaWtub3dfY2xpY2siLCJ3aW5kb3ciLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsIndpbmRvd19kZXZpY2VvcmllbnRhdGlvbiIsInBsYXlfZXZlbnRfYm94IiwiX3QiLCJfbiIsIm5vd19ldmVudCIsImV2ZW50X2JveF9iZ19zdGFnZSIsInJlbW92ZUFsbENoaWxkcmVuIiwiZXZlbnRfYm94X2JnX21jIiwiYWRkQ2hpbGQiLCJjcmVhdGVqcyIsIlNwcml0ZSIsImV2ZW50X2JveF9iZ19zcHJpdGVTaGVldCIsImV2ZW50X2JveF9iZ19jb21wbGV0ZSIsImFkZENsYXNzIiwiZmluZCIsInJlbW92ZUNsYXNzIiwic3RvcCIsIlN0YWdlTGlzdGVudGVyIiwic3RyZWV0X2RlZyIsInVwZGF0ZSIsInN0cmVldF9hbGwiLCJfdG91Y2htb3ZlIiwiZGV2aWNlIiwibW9iaWxlIiwib3JpZ2luYWxFdmVudCIsInRvdWNoZXMiLCJkcmFnX2xlZnQiLCJwYWdlWCIsIm9nX2xlZnQiLCJvcmdfc3RyZWV0IiwidG1wX29yZ19zdHJlZXQiLCJzdHJlZXRfbW92ZSIsIl90aGlzIiwidGhpcyIsIm9uIiwicHJldmVudERlZmF1bHQiLCJzdHJlZXRfY3RybCIsImJpbmQiLCJ1bmJpbmQiLCJjbGVhclRpbWVvdXQiLCJtZW51YnRuX2NsaWNrIiwiaGFzQ2xhc3MiLCJtZW51X3RpbWVvdXQiLCJzdHJlZXRfYWxwaGEiLCJhbHBoYSIsIk1hdGgiLCJmbG9vciIsImh0bWwiLCJkaXMiLCJ3cnAiLCJjbG9uZSIsImFwcGVuZFRvIiwiZXZlbnRfYm94X2JnIiwiaW1hZ2VzIiwiZnJhbWVzIiwiaGVpZ2h0IiwiYW5pbWF0aW9ucyIsInN0YW5kIiwic2hvdyIsInNwZWVkIiwiYmFja3Nob3ciLCJTcHJpdGVTaGVldCIsImV2ZW50X2JveF9iZ19jYW52YXMiLCJnZXRFbGVtZW50QnlJZCIsIlN0YWdlIiwiVGlja2VyIiwic2V0RlBTIiwiZWFjaCIsImNsaWNrIiwibG9hZCJdLCJtYXBwaW5ncyI6IkFBQUFBLEVBQUVDLFVBQVVDLE1BQU0sV0F3Q2pCLFFBQVNDLEtBQ1JDLEVBQUVDLFFBQVFDLFVBQ1ZGLEVBQUVHLGFBQWVQLEVBQUUsV0FBV1EsR0FBRyxHQUFHQyxRQUNwQ1QsRUFBRSxXQUFXUSxHQUFHLEdBQUdFLElBQUksT0FBT04sRUFBRUcsY0FDaENQLEVBQUUsZUFBZVUsSUFBSSxjQUFjTixFQUFFRyxpQkFDckNILEVBQUVPLGNBQWdCQyxXQUFXLFdBQVlDLEtBQWlCLE1BQzFEQyxPQUFPQyxpQkFBaUIsb0JBQXFCLFNBQVNDLEdBQ3JEQyxFQUF5QkQsS0FLM0IsUUFBU0UsR0FBZUMsRUFBR0MsR0FDMUIsR0FBR0QsRUFBRyxDQUNMLEdBQUdmLEVBQUVpQixXQUFhRCxFQUFJLE1BQ2pCaEIsR0FBRWlCLFVBQVlELEVBQ2xCaEIsRUFBRWtCLG1CQUFtQkMsb0JBQ3RCbkIsRUFBRW9CLGdCQUFrQnBCLEVBQUVrQixtQkFBbUJHLFNBQVMsR0FBSUMsVUFBU0MsT0FBT3ZCLEVBQUV3Qix5QkFBMEIsU0FDbEd4QixFQUFFb0IsZ0JBQWdCVCxpQkFBaUIsZUFBZ0JjLEdBQ25EN0IsRUFBRSxjQUFjOEIsU0FBUyxNQUN6QjlCLEVBQUUsY0FBYytCLEtBQUssUUFBUUMsWUFBWSxNQUFNeEIsR0FBR1ksR0FBSVUsU0FBUyxVQUMzRCxDQUNKLEdBQWtCLEdBQWYxQixFQUFFaUIsVUFBZ0IsTUFDaEJqQixHQUFFaUIsVUFBWSxFQUNuQmpCLEVBQUVrQixtQkFBbUJDLG9CQUNyQm5CLEVBQUVvQixnQkFBa0JwQixFQUFFa0IsbUJBQW1CRyxTQUFTLEdBQUlDLFVBQVNDLE9BQU92QixFQUFFd0IseUJBQTBCLGFBQ2xHeEIsRUFBRW9CLGdCQUFn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R0FDZG1DLFdBQVksSUFDWmMsYUFBYyxFQUNkUCxhQUFhLEVBQ2JsQixXQUFXLEVBQ1hkLFVBQVUsRUFFWHJCLEdBQUUsV0FBV21FLFFBQVFDLFNBQVMsa0JBQzlCaEUsRUFBRWlFLGNBQ0RDLFFBQVMsMkJBQ1RDLFFBQVM5RCxNQUFNLElBQUsrRCxPQUFPLEtBQzNCQyxZQUNDQyxNQUFNLEVBQ05DLE1BQ0VKLFFBQVMsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEdBQzFDSyxNQUFPLEdBRVRDLFVBQ0VOLFFBQVMsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEVBQUUsRUFBRSxFQUFFLEdBQzFDSyxNQUFPLEtBSVh4RSxFQUFFd0IseUJBQTJCLEdBQUlGLFVBQVNvRCxZQUFZMUUsRUFBRWlFLGNBQ3hEakUsRUFBRTJFLG9CQUFzQjlFLFNBQVMrRSxlQUFlLGdCQUNoRDVFLEVBQUVrQixtQkFBcUIsR0FBSUksVUFBU3VELE1BQU03RSxFQUFFMkUscUJBQzVDckQsU0FBU3dELE9BQU9DLE9BQU8sSUFDdkJ6RCxTQUFTd0QsT0FBT25FLGlCQUFpQixPQUFRbUIsR0FHekNsQyxFQUFFLGVBQWVvRixLQUFLL0MsR0FDdEJyQyxFQUFFLGNBQWNtRCxHQUFHLFFBQVF0QyxHQUMzQmIsRUFBRSxZQUFZcUYsTUFBTTVCLEdBQ3BCekQsRUFBRWMsUUFBUXdFLEtBQUtuRiIsImZpbGUiOiJjb21tb24uanMiLCJzb3VyY2VzQ29udGVudCI6WyIkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpe1xyXG5cdC8vSW5pdFxyXG5cdHZhciBvID17XHJcblx0XHR3cnA6ICQoJy53cmFwcGVyJyksXHJcblx0XHRsb2FkaW5nOiAkKCcubG9hZGluZycpLFxyXG5cdFx0bWVudV90aW1lb3V0OicnLFxyXG5cdFx0aWtub3dfdGltZW91dDonJyxcclxuXHRcdG9yZ19zdHJlZXQ6IDE3OSxcclxuXHRcdHN0cmVldF9hbHBoYTogMCxcclxuXHRcdHN0cmVldF9jdHJsOiB0cnVlLFxyXG5cdFx0c3RyZWV0X2RlZzowLFxyXG5cdFx0bm93X2V2ZW50OjBcclxuXHR9O1xyXG5cdCQoJy5zdHJlZXQnKS5jbG9uZSgpLmFwcGVuZFRvKCcuc3RyZWV0X2FsbF9pbicpO1xyXG5cdG8uZXZlbnRfYm94X2JnID0ge1xyXG5cdFx0aW1hZ2VzOiBbXCJpbWFnZXMvZXZlbnRfYm94X2JnLnBuZ1wiXSxcclxuXHRcdGZyYW1lczoge3dpZHRoOjc1MCwgaGVpZ2h0OjI2MH0sXHJcblx0XHRhbmltYXRpb25zOiB7XHJcblx0XHRcdHN0YW5kOjAsXHJcblx0XHRcdHNob3c6e1xyXG5cdFx0XHRcdFx0ZnJhbWVzOiBbMCw4LDEsOSwyLDEwLDMsMTEsNCwxMiw1LDEzLDYsMTQsN10sXHJcblx0XHRcdFx0XHRzcGVlZDogMVxyXG5cdFx0XHR9LFxyXG5cdFx0XHRiYWNrc2hvdzp7XHJcblx0XHRcdFx0XHRmcmFtZXM6IFs3LDE0LDYsMTMsNSwxMiw0LDExLDMsMTAsMiw5LDEsOCwwXSxcclxuXHRcdFx0XHRcdHNwZWVkOiAxXHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9O1xyXG5cdG8uZXZlbnRfYm94X2JnX3Nwcml0ZVNoZWV0ID0gbmV3IGNyZWF0ZWpzLlNwcml0ZVNoZWV0KG8uZXZlbnRfYm94X2JnKTtcclxuXHRvLmV2ZW50X2JveF9iZ19jYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImV2bmV0X2JveF9iZ1wiKTtcclxuXHRvLmV2ZW50X2JveF9iZ19zdGFnZSA9IG5ldyBjcmVhdGVqcy5TdGFnZShvLmV2ZW50X2JveF9iZ19jYW52YXMpO1xyXG5cdGNyZWF0ZWpzLlRpY2tlci5zZXRGUFMoMzApO1xyXG5cdGNyZWF0ZWpzLlRpY2tlci5hZGRFdmVudExpc3RlbmVyKFwidGlja1wiLCBTdGFnZUxpc3RlbnRlcik7XHJcblxyXG5cdC8vQWRkTGlzdGVuZXJcclxuXHQkKCcuc3RyZWV0X2FsbCcpLmVhY2goc3RyZWV0X2FsbCk7XHJcblx0JCgnLmlrbm93X2J0bicpLm9uKCdjbGljaycsaWtub3dfY2xpY2spO1xyXG5cdCQoJy5tZW51YnRuJykuY2xpY2sobWVudWJ0bl9jbGljayk7XHJcblx0JCh3aW5kb3cpLmxvYWQod2luZG93X2xvYWQpO1xyXG5cdGZ1bmN0aW9uIHdpbmRvd19sb2FkKCl7XHJcblx0XHRvLmxvYWRpbmcuZmFkZU91dCgpO1xyXG5cdFx0by5zdHJlZXRfd2lkdGggPSAkKCcuc3RyZWV0JykuZXEoMCkud2lkdGgoKTtcclxuXHRcdCQoJy5zdHJlZXQnKS5lcSgxKS5jc3MoJ2xlZnQnLG8uc3RyZWV0X3dpZHRoKTtcclxuXHRcdCQoJy5zdHJlZXRfYWxsJykuY3NzKCdtYXJnaW4tbGVmdCcsby5zdHJlZXRfd2lkdGgqLTEpO1xyXG5cdFx0by5pa25vd190aW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbigpeyBpa25vd19jbGljaygpOyB9LDUzMDApO1xyXG5cdFx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2RldmljZW9yaWVudGF0aW9uJywgZnVuY3Rpb24oZSl7XHJcblx0XHRcdHdpbmRvd19kZXZpY2VvcmllbnRhdGlvbihlKTtcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0Ly9FdmVudFxyXG5cdGZ1bmN0aW9uIHBsYXlfZXZlbnRfYm94KF90LF9uKXtcclxuXHRcdGlmKF90KXtcclxuXHRcdFx0aWYoby5ub3dfZXZlbnQgPT0gX24pIHJldHVybjtcclxuXHRcdFx0ZWxzZSBvLm5vd19ldmVudCA9IF9uO1xyXG5cdFx0XHQgby5ldmVudF9ib3hfYmdfc3RhZ2UucmVtb3ZlQWxsQ2hpbGRyZW4oKTtcclxuXHRcdFx0by5ldmVudF9ib3hfYmdfbWMgPSBvLmV2ZW50X2JveF9iZ19zdGFnZS5hZGRDaGlsZChuZXcgY3JlYXRlanMuU3ByaXRlKG8uZXZlbnRfYm94X2JnX3Nwcml0ZVNoZWV0LCBcInNob3dcIikpO1xyXG5cdFx0XHRvLmV2ZW50X2JveF9iZ19tYy5hZGRFdmVudExpc3RlbmVyKFwiYW5pbWF0aW9uZW5kXCIsIGV2ZW50X2JveF9iZ19jb21wbGV0ZSk7XHJcblx0XHRcdCQoJy5ldm5ldF9ib3gnKS5hZGRDbGFzcygnb24nKTtcclxuXHRcdFx0JCgnLmV2bmV0X2JveCcpLmZpbmQoJ3NwYW4nKS5yZW1vdmVDbGFzcygnb24nKS5lcShfbikuYWRkQ2xhc3MoJ29uJyk7XHJcblx0XHR9ZWxzZXtcclxuXHRcdFx0aWYoby5ub3dfZXZlbnQgPT0gMCkgcmV0dXJuO1xyXG5cdFx0XHRlbHNlIG8ubm93X2V2ZW50ID0gMDtcclxuXHRcdFx0by5ldmVudF9ib3hfYmdfc3RhZ2UucmVtb3ZlQWxsQ2hpbGRyZW4oKTtcclxuXHRcdFx0by5ldmVudF9ib3hfYmdfbWMgPSBvLmV2ZW50X2JveF9iZ19zdGFnZS5hZGRDaGlsZChuZXcgY3JlYXRlanMuU3ByaXRlKG8uZXZlbnRfYm94X2JnX3Nwcml0ZVNoZWV0LCBcImJhY2tzaG93XCIpKTtcclxuXHRcdFx0by5ldmVudF9ib3hfYmdfbWMuYWRkRXZlbnRMaXN0ZW5lcihcImFuaW1hdGlvbmVuZFwiLCBldmVudF9ib3hfYmdfY29tcGxldGUpO1xyXG5cdFx0XHQkKCcuZXZuZXRfYm94JykucmVtb3ZlQ2xhc3MoJ29uJyk7XHJcblx0XHRcdCQoJy5ldm5ldF9ib3gnKS5maW5kKCdzcGFuJykucmVtb3ZlQ2xhc3MoJ29uJyk7XHJcblx0XHR9XHJcblx0fVxyXG5cdGZ1bmN0aW9uIGV2ZW50X2JveF9iZ19jb21wbGV0ZSgpe1xyXG5cdFx0by5ldmVudF9ib3hfYmdfbWMuc3RvcCgpO1xyXG5cdH1cclxuXHRmdW5jdGlvbiBTdGFnZUxpc3RlbnRlcigpe1xyXG5cdFx0aWYoby5zdHJlZXRfZGVnID49IC02MiAmJiBvLnN0cmVldF9kZWcgPD0gLTQyKSBwbGF5X2V2ZW50X2JveCh0cnVlLDEpO1xyXG5cdFx0ZWxzZSBpZihvLnN0cmVldF9kZWcgPj0gLTEyMCAmJiBvLnN0cmVldF9kZWcgPD0gLTEwMCkgcGxheV9ldmVudF9ib3godHJ1ZSwyKTtcclxuXHRcdGVsc2UgaWYoby5zdHJlZXRfZGVnID49IC0xOTAgJiYgby5zdHJlZXRfZGVnIDw9IC0xNzApIHBsYXlfZXZlbnRfYm94KHRydWUsMyk7XHJcblx0XHRlbHNlIGlmKG8uc3RyZWV0X2RlZyA+PSAtMjE4ICYmIG8uc3RyZWV0X2RlZyA8PSAtMTk4KSBwbGF5X2V2ZW50X2JveCh0cnVlLDQpO1xyXG5cdFx0ZWxzZSBpZihvLnN0cmVldF9kZWcgPj0gLTI5NyAmJiBvLnN0cmVldF9kZWcgPD0gLTI3NykgcGxheV9ldmVudF9ib3godHJ1ZSw1KTtcclxuXHRcdGVsc2UgcGxheV9ldmVudF9ib3goZmFsc2UpO1xyXG5cclxuXHRcdG8uZXZlbnRfYm94X2JnX3N0YWdlLnVwZGF0ZSgpO1xyXG5cdH1cclxuXHRmdW5jdGlvbiBzdHJlZXRfYWxsKCl7XHJcblx0XHR2YXIgX3RoaXMgPSAkKHRoaXMpLFxyXG5cdFx0XHRvZ19sZWZ0ID0gMCxcclxuXHRcdFx0ZHJhZ19sZWZ0ID0gMCxcclxuXHRcdFx0dG1wX29yZ19zdHJlZXQ7XHJcblxyXG5cdFx0X3RoaXMub24oJ3RvdWNoc3RhcnQnLCBmdW5jdGlvbihlKXtcclxuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHRpZihkZXZpY2UubW9iaWxlKCkpe2UgPSBlLm9yaWdpbmFsRXZlbnQudG91Y2hlc1swXTt9XHJcblx0XHRcdG9nX2xlZnQgPSBlLnBhZ2VYO1xyXG5cdFx0XHRfdGhpcy5hZGRDbGFzcygnbW92ZScpO1xyXG5cdFx0XHRvLnN0cmVldF9jdHJsID0gZmFsc2U7XHJcblx0XHRcdHRtcF9vcmdfc3RyZWV0ID0gby5vcmdfc3RyZWV0O1xyXG5cdFx0XHRfdGhpcy5iaW5kKCd0b3VjaG1vdmUnLCBfdG91Y2htb3ZlKTtcclxuXHRcdH0pO1xyXG5cdFx0X3RoaXMub24oJ3RvdWNoZW5kJywgZnVuY3Rpb24oKXtcclxuXHRcdFx0X3RoaXMucmVtb3ZlQ2xhc3MoJ21vdmUnKTtcclxuXHRcdFx0by5zdHJlZXRfY3RybCA9IHRydWU7XHJcblx0XHRcdF90aGlzLnVuYmluZCgndG91Y2htb3ZlJywgX3RvdWNobW92ZSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHRmdW5jdGlvbiBfdG91Y2htb3ZlKGUpe1xyXG5cdFx0XHRpZihkZXZpY2UubW9iaWxlKCkpe2UgPSBlLm9yaWdpbmFsRXZlbnQudG91Y2hlc1swXTt9XHJcbiAgICAgICAgICAgIGRyYWdfbGVmdCA9IGUucGFnZVggLSBvZ19sZWZ0O1xyXG5cdFx0XHRvLm9yZ19zdHJlZXQgPSB0bXBfb3JnX3N0cmVldCAtIGRyYWdfbGVmdCAvICQod2luZG93KS53aWR0aCgpICogMTIwO1xyXG5cdFx0XHRpZihvLm9yZ19zdHJlZXQgPCAwKSBvLm9yZ19zdHJlZXQgPSBvLm9yZ19zdHJlZXQgKyAzNjA7XHJcblx0XHRcdGVsc2UgaWYoby5vcmdfc3RyZWV0ID4gMzYwKSBvLm9yZ19zdHJlZXQgPSBvLm9yZ19zdHJlZXQgLTM2MDtcclxuXHRcdFx0c3RyZWV0X21vdmUoKTtcclxuXHRcdH1cclxuXHR9XHJcblx0ZnVuY3Rpb24gaWtub3dfY2xpY2soKXtcclxuXHRcdGNsZWFyVGltZW91dChvLmlrbm93X3RpbWVvdXQpO1xyXG5cdFx0JCgnLnRpcF9ib3gnKS5mYWRlT3V0KCk7XHJcblx0fVxyXG5cdGZ1bmN0aW9uIG1lbnVidG5fY2xpY2soKXtcclxuXHRcdGlmKCQodGhpcykuaGFzQ2xhc3MoJ29uJykpe1xyXG5cdFx0XHQkKCcubWVudURvbScpLnJlbW92ZUNsYXNzKCdvbicpO1xyXG5cdFx0XHQkKCcubWVudScpLmFkZENsYXNzKCdvZmYnKS5yZW1vdmVDbGFzcygnb24nKTtcclxuXHRcdFx0by5tZW51X3RpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdG8uc3RyZWV0X2N0cmwgPSB0cnVlO1xyXG5cdFx0XHRcdCQoJy5tZW51JykucmVtb3ZlQ2xhc3MoJ29mZicpO1xyXG5cdFx0XHR9LCAxMDAwKTtcclxuXHRcdH1cclxuXHRcdGVsc2V7XHJcblx0XHRcdG8uc3RyZWV0X2N0cmwgPSBmYWxzZTtcclxuXHRcdFx0JCgnLm1lbnVEb20nKS5hZGRDbGFzcygnb24nKTtcclxuXHRcdFx0Y2xlYXJUaW1lb3V0KG8ubWVudV90aW1lb3V0KTtcclxuXHRcdFx0JCgnLm1lbnUnKS5yZW1vdmVDbGFzcygnb2ZmJykuYWRkQ2xhc3MoJ29uJyk7XHJcblx0XHR9XHJcblx0fVxyXG5cdGZ1bmN0aW9uIHdpbmRvd19kZXZpY2VvcmllbnRhdGlvbihlKSB7XHJcblx0XHRvLnN0cmVldF9hbHBoYSA9IGUuYWxwaGE7XHJcblx0XHRpZihvLnN0cmVldF9jdHJsKSBzdHJlZXRfbW92ZSgpO1xyXG5cdH1cclxuXHRmdW5jdGlvbiBzdHJlZXRfbW92ZSgpe1xyXG5cdFx0by5zdHJlZXRfd2lkdGggPSAkKCcuc3RyZWV0JykuZXEoMCkud2lkdGgoKTtcclxuXHRcdCQoJy5zdHJlZXQnKS5lcSgxKS5jc3MoJ2xlZnQnLG8uc3RyZWV0X3dpZHRoKTtcclxuXHRcdCQoJy5zdHJlZXRfYWxsJykuY3NzKCdtYXJnaW4tbGVmdCcsby5zdHJlZXRfd2lkdGgqLTEpO1xyXG5cdFx0by5zdHJlZXRfZGVnID0gTWF0aC5mbG9vciggby5zdHJlZXRfYWxwaGEgLSBvLm9yZ19zdHJlZXQpO1xyXG5cdFx0JCgnLnBvcCcpLmh0bWwoby5zdHJlZXRfZGVnKTtcclxuXHRcdHZhciBkaXMgPSBNYXRoLmZsb29yKG8uc3RyZWV0X3dpZHRoIC8gMzYwICogby5zdHJlZXRfZGVnICsgJCh3aW5kb3cpLndpZHRoKCkpO1xyXG5cdFx0JCgnLnN0cmVldF9hbGwnKS5jc3MoJ2xlZnQnLGRpcyk7XHJcblx0fVxyXG5cdFxyXG59KS8vcmVhZHkgZW5kICBcclxuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
